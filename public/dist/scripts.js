"use strict";$(function(){$(document).foundation(),$(".screenText").slick({dots:!0,infinite:!0,speed:500,fade:!0,cssEase:"linear"}),$(window).on("load resize",function(){$("#footer");$(".title-bar").is(":visible")?$("#index-menu").removeClass("addFloat"):$("#index-menu").addClass("addFloat");$(window).width()<400?($(".menuDiv").addClass("menuMode"),$("#user-menu").removeClass("show")):($("#user-menu").removeClass("show"),$("#user-menu").css("width","180px"),$(".close-icon").remove(),$(".menuDiv").removeClass("menuMode"))}),$("#login").on("submit",function(e){e.preventDefault(),s();var o=$("#userName").val(),a=$("#userPassword").val();if(0!==o.length&&0!==a.length){var i=/^[a-zA-Z0-9._]{1,30}$/.test(o);i?$.post("/login",{username:o,password:a}).fail(function(e){var s=e.responseJSON;400===e.status&&r(s[0].msg,"error"),401===e.status&&r(s.msg,"error")}).done(function(e){window.location.href="/user/home"}):(n("userName"),r("Usernames can only use letters, numbers, underscores and periods.","error"))}else 0===o.length&&(n("userName"),$("#emptyFields").removeClass("hide")),0==a.length&&(n("userPassword"),$("#emptyFields").removeClass("hide"))}),$("#editProfile").on("submit",function(e){e.preventDefault(),s();var o=$("#userName").val(),a=$("#email").val();if(0!==o.length&&0!==a.length){var i=/^[a-zA-Z0-9._]{1,30}$/.test(o);i?$.post("/user/editProfile",{username:o,email:a}).fail(function(e){if(400===e.status){var s=e.responseJSON;s.length>=1?r(s[0].msg,"error"):r(s.msg,"error")}}).done(function(e){r(e.msg,"msg"),$("#loginLink").removeClass("hide"),$(".btns").addClass("hide")}):(n("userName"),r("Usernames can only use letters, numbers, underscores and periods.","error"))}else 0===o.length&&(n("userName"),$("#emptyFields").removeClass("hide")),0==a.length&&(n("email"),$("#emptyFields").removeClass("hide"))}),$("#confirmUser").on("submit",function(o){o.preventDefault(),s();var a=$("#username").val();0!==a.length?$.post("/verifyUser",{username:a}).fail(function(e){if(401===e.status){var s=e.responseJSON;r(s.msg,"error")}}).done(function(s){$("#username").val(""),$("#forgotPassword").removeClass("hide"),$("#confirmUser").addClass("hide"),e=s}):0===a.length&&(n("username"),$("#emptyFields").removeClass("hide"))}),$("#forgotPassword").on("submit",function(o){o.preventDefault(),s();var a=$("#newPassword").val(),i=$("#confirmPassword").val();0===a.length&&(n("newPassword"),$("#emptyFields").removeClass("hide"));0===i.length&&(n("confirmPassword"),$("#emptyFields").removeClass("hide"));0!==a.length&&i!==a&&(n("confirmPassword"),$("#emptyFields").addClass("hide"),r("Confirm password doesn't match with the new password","error"));0!==a.length&&0!==i.length&&a===i&&$.post("/forgotPassword",{newPassword:a,user:e}).fail(function(e){if(400===e.status){var s=e.responseJSON;r(s.msg,"error")}}).done(function(e){r(e.msg,"msg"),$(".btns").addClass("hide"),$("#loginLink").removeClass("hide")})}),$("#signup").on("submit",function(e){e.preventDefault(),s();var o=$("#userName").val(),a=$("#userEmail").val(),i=$("#userPassword").val(),t=$("#confirmPassword").val(),l=/^[a-zA-Z0-9._]{1,30}$/.test(o);0===o.length&&(n("userName"),$("#emptyFields").removeClass("hide"));l||0===o.length||(n("userName"),r("Usernames can only use letters, numbers, underscores and periods.","error"));0===a.length&&(n("userEmail"),$("#emptyFields").removeClass("hide"));0===i.length&&(n("userPassword"),$("#emptyFields").removeClass("hide"));0===t.length&&(n("confirmPassword"),$("#emptyFields").removeClass("hide"));0!==i.length&&0!==t.length&&t!==i&&(n("confirmPassword"),$("#emptyFields").addClass("hide"),r("Confirm password doesn't match with password","error"),0!==a.length&&0!==o.length||$("#emptyFields").removeClass("hide"));0!==o.length&&0!==i.length&&0!==t.length&&0!==a.length&&i===t&&l&&$.post("/signup",{username:o,password:i,email:a}).fail(function(e){if(400===e.status){var s=e.responseJSON;s.length>=1?r(s[0].msg,"error"):r(s.msg,"error")}}).done(function(e){r(e.msg,"msg"),$(".btns").addClass("hide"),$("#loginLink").removeClass("hide")})}),$("#reset").on("click",s),$("#changePassword").on("submit",function(e){e.preventDefault(),s();var o=$("#oldPassword").val(),a=$("#newPassword").val(),i=$("#confirmPassword").val();0===a.length&&(n("newPassword"),$("#emptyFields").removeClass("hide"));0===i.length&&(n("confirmPassword"),$("#emptyFields").removeClass("hide"));0!==a.length&&i!==a&&(n("confirmPassword"),$("#emptyFields").addClass("hide"),r("Confirm password doesn't match with the new password","error"));0!==a.length&&0!==i.length&&a===i&&$.post("/user/changePassword",{oldPassword:o,newPassword:a}).fail(function(e){if(400===e.status){var s=e.responseJSON;r(s.msg,"error")}}).done(function(e){r(e.msg,"msg"),$(".btns").addClass("hide"),$("#loginLink").removeClass("hide")})}),$("#searchIcon").on("click",function(e){e.preventDefault(),$("#headerDiv").removeClass("show").addClass("hide"),$("#search").addClass("show")}),$(".js-search-close").on("click",function(e){e.preventDefault(),$("#headerDiv").removeClass("hide").addClass("show"),$("#search").removeClass("show")}),$(".menuDiv").on("click",function(e){e.preventDefault(),$("#user-menu").hasClass("show")?$("#user-menu").removeClass("show"):$("#user-menu").addClass("show")}),$(document).on("click",".menuMode",function(e){e.preventDefault();var s=$("#user-menu");$("#user-menu").addClass("show"),s.css("width","250px"),s.prepend('<div class="close-icon"><i class="fi-x"></i></div>')}),$(document).on("click",".close-icon",function(e){e.preventDefault();var s=$("#user-menu");$("#user-menu").removeClass("show"),s.css("width","180px"),$(".close-icon").remove()});var e=null;function s(){$("#error").empty(),$("#msg").empty(),$("#emptyFields").addClass("hide"),$(".icon-error").remove()}function r(e,s){var r=$("#msgcont");0===r.length&&(r=$("<ul id='msgcont'></ul>")),r.append("<li>"+e+"</li>"),$("#"+s).html(r)}function n(e){var s=$("#"+e),r=$("<span class='icon-error'><i class='fi-x-circle'></i></span>");s.after(r)}}());
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiJCIsImRvY3VtZW50IiwiZm91bmRhdGlvbiIsImRvdHMiLCJpbmZpbml0ZSIsInNwZWVkIiwid2luZG93Iiwib24iLCJpcyIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJ3aWR0aCIsImNzcyIsInJlbW92ZSIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImNsZWFyTWVzc2FnZSIsIm5hbWUiLCJ2YWwiLCJwd2QiLCJsZW5ndGgiLCJuYW1lVmVyaWZpZXMiLCJ0ZXN0IiwicG9zdCIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJmYWlsIiwicmVzcG9uc2VUZXh0IiwiZGF0YSIsInJlc3BvbnNlSlNPTiIsInNob3dNZXNzYWdlIiwibXNnIiwiZG9uZSIsImxvY2F0aW9uIiwiaHJlZiIsInNob3dFcnJvckNpcmNsZSIsImVtYWlsIiwicGF0dGVybiIsInN0YXR1cyIsImhhbmRsZVZlcmlmeVVzZXIiLCJ1c2VyIiwibmV3UHdkIiwiY29uZmlybVB3ZCIsIm5ld1Bhc3N3b3JkIiwiaGFuZGxlQ2hhbmdlUGFzc3dvcmQiLCJvbGRQd2QiLCJjb25maXJtcHdkIiwiZGlzcGxheVNlYXJjaEJhciIsInNob3dVc2VyTWVudUQiLCJvbGRQYXNzd29yZCIsImhhbmRsZVNpZ25VcCIsInVzZXJOYW1lUmVnZXgiLCJzaG93VXNlck1lbnUiLCJ1c2VySWNvbiIsImhhc0NsYXNzIiwicHJlcGVuZCIsInVsRWxlIiwibXNnRGl2IiwiZW1wdHkiLCJtc2dUeHQiLCJhcHBlbmQiLCJodG1sIiwiY2lyY2xlSW5wIiwiaW5wRWxlIiwic3BhbkVsZSIsImFmdGVyIl0sIm1hcHBpbmdzIjoiYUFBQUEsRUFBRSxXQUlBQSxFQUFFQyxVQUFVQyxhQUFaRixFQUFFQyxlQUFVQyxPQUdWQyxNQUFNLEVBRE5DLFVBQUEsRUFDQUQsTUFBTSxJQUNOQyxNQUFBQSxFQUNBQyxRQUFPLFdBUVRMLEVBQUVNLFFBQVFDLEdBQUcsY0FtQmIsV0FDbUJQLEVBQUEsV0FDYkEs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VUF6V0RWLEVBQUVDLFVBQUFNLEdBQUEsUUFBRixZQW9YRVAsU0FBQWMsR0FDQWQsRUFBRWUsaUJBQ0ZmLElBQUVxRCxFQUFGckQsRUFBa0JVLGNBQ2xCVixFQUFFLGNBQUZVLFNBQUEsUUFDRDJDLEVBQUF6QyxJQUFBLFFBQUEsU0ExQkN5QyxFQUFTRSxRQUFRLHdEQTdWbkJ2RCxFQUFFQyxVQUFGTSxHQUFjQSxRQUFkLGNBMlhFLFNBQUlPLEdBQ0YwQyxFQUFBQSxpQkFDRCxJQUFBSCxFQUFBckQsRUFBQSxjQUNEd0QsRUFBQUEsY0FBYS9DLFlBQUEsUUFDYlQsRUFBUXlELElBQUFBLFFBQWFELFNBQ3RCeEQsRUFBQSxlQUFBYSxXQTNYRCxJQUFJMkIsRUFBTyxLQTZXWCxTQUFTeEIsSUFDUGhCLEVBQUUsVUFBVTBELFFBQ1oxRCxFQUFFLFFBQVEwRCxRQUNWMUQsRUFBRSxnQkFBZ0JVLFNBQVMsUUFDM0JWLEVBQUUsZUFBZWEsU0FHbkIsU0FBU2lCLEVBQVk2QixFQUFRRixHQUMzQixJQUFJRCxFQUFReEQsRUFBRSxZQUNPLElBQWpCd0QsRUFBTXBDLFNBQ1JvQyxFQUFReEQsRUFBRSwyQkFFWndELEVBQU1JLE9BQU8sT0FBU0QsRUFBUyxTQUMvQjNELEVBQUUsSUFBTXlELEdBQVFJLEtBQUtMLEdBR3ZCLFNBQVNyQixFQUFnQjJCLEdBQ3ZCLElBQU1DLEVBQVMvRCxFQUFFLElBQU04RCxHQUNqQkUsRUFBVWhFLEVBQUUsK0RBQ2xCK0QsRUFBT0UsTUFBTUQsSUFoYWYiLCJmaWxlIjoic2NyaXB0cy5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoZnVuY3Rpb24oKSB7XG4gIC8qKlxuICAgKiBJbml0aWFsaXplIGZvdW5kYXRpb25cbiAgICovXG4gICQoZG9jdW1lbnQpLmZvdW5kYXRpb24oKTtcblxuICAkKCcuc2NyZWVuVGV4dCcpLnNsaWNrKHtcbiAgICBkb3RzOiB0cnVlLFxuICAgIGluZmluaXRlOiB0cnVlLFxuICAgIHNwZWVkOiA1MDAsXG4gICAgZmFkZTogdHJ1ZSxcbiAgICBjc3NFYXNlOiAnbGluZWFyJ1xuICB9KTtcblxuICAvKipcbiAgICogUmVnaXN0ZXIgZnVuY3Rpb25zXG4gICAqL1xuICAkKHdpbmRvdykub24oJ2xvYWQgcmVzaXplJywgaGFuZGxlTG9hZCk7XG4gICQoJyNsb2dpbicpLm9uKCdzdWJtaXQnLCBoYW5kbGVMb2dpbik7IC8qIG9uIGxvZ2luICovXG4gICQoJyNlZGl0UHJvZmlsZScpLm9uKCdzdWJtaXQnLCBoYW5kbGVVcGRhdGVQcm9maWxlKTsgLyogdXBkYXRlIHByb2ZpbGUgKi9cbiAgJCgnI2NvbmZpcm1Vc2VyJykub24oJ3N1Ym1pdCcsIGhhbmRsZVZlcmlmeVVzZXIpOyAvKiB2ZXJpZnkgdXNlciAqL1xuICAkKCcjZm9yZ290UGFzc3dvcmQnKS5vbignc3VibWl0JywgaGFuZGxlVXBkYXRlUGFzc3dvcmQpOyAvKiBwb3N0IHVwZGF0ZSBwYXNzd29yZCAqL1xuICAkKCcjc2lnbnVwJykub24oJ3N1Ym1pdCcsIGhhbmRsZVNpZ25VcCk7IC8qIFNpZ24gdXAgKi9cbiAgJCgnI3Jlc2V0Jykub24oJ2NsaWNrJywgY2xlYXJNZXNzYWdlKTsgLyogQ2xlYXIgbWVzc2FnZXMgb24gY2xpY2sgb2YgcmVzZXQgKi9cbiAgJCgnI2NoYW5nZVBhc3N3b3JkJykub24oJ3N1Ym1pdCcsIGhhbmRsZUNoYW5nZVBhc3N3b3JkKTsgLyogcG9zdCBjaGFuZ2UgcGFzc3dvcmQgKi9cbiAgJCgnI3NlYXJjaEljb24nKS5vbignY2xpY2snLCBkaXNwbGF5U2VhcmNoQmFyKTtcbiAgJCgnLmpzLXNlYXJjaC1jbG9zZScpLm9uKCdjbGljaycsIGhpZGVTZWFyY2hCYXIpO1xuICAkKCcubWVudURpdicpLm9uKCdjbGljaycsIHNob3dVc2VyTWVudUQpO1xuICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLm1lbnVNb2RlJywgc2hvd1VzZXJNZW51KTtcbiAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5jbG9zZS1pY29uJywgaGlkZVVzZXJNZW51KTtcblxuXG4gIHZhciB1c2VyID0gbnVsbDtcblxuXG4gIC8qIGZ1bmN0aW9ucyAqL1xuICBmdW5jdGlvbiBoYW5kbGVMb2FkKCkge1xuICAgIGNvbnN0IGZvb3RlciA9ICQoJyNmb290ZXInKTtcbiAgICBpZiAoJCgnLnRpdGxlLWJhcicpLmlzKCc6dmlzaWJsZScpKSB7XG4gICAgICAkKCcjaW5kZXgtbWVudScpLnJlbW92ZUNsYXNzKCdhZGRGbG9hdCcpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkKCcjaW5kZXgtbWVudScpLmFkZENsYXNzKCdhZGRGbG9hdCcpO1xuICAgIH1cblxuICAgIHZhciB3aWR0aCA9ICQod2luZG93KS53aWR0aCgpO1xuICAgIGlmICh3aWR0aCA8IDQwMCkge1xuICAgICAgJCgnLm1lbnVEaXYnKS5hZGRDbGFzcygnbWVudU1vZGUnKTtcbiAgICAgICQoJyN1c2VyLW1lbnUnKS5yZW1vdmVDbGFzcygnc2hvdycpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkKCcjdXNlci1tZW51JykucmVtb3ZlQ2xhc3MoJ3Nob3cnKTtcbiAgICAgICQoJyN1c2VyLW1lbnUnKS5jc3MoJ3dpZHRoJywgJzE4MHB4Jyk7XG4gICAgICAkKCcuY2xvc2UtaWNvbicpLnJlbW92ZSgpO1xuICAgICAgJCgnLm1lbnVEaXYnKS5yZW1vdmVDbGFzcygnbWVudU1vZGUnKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVMb2dpbihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNsZWFyTWVzc2FnZSgpO1xuICAgIGNvbnN0IG5hbWUgPSAkKCcjdXNlck5hbWUnKS52YWwoKTtcbiAgICBjb25zdCBwd2QgPSAkKCcjdXNlclBhc3N3b3JkJykudmFsKCk7XG5cbiAgICBpZiAobmFtZS5sZW5ndGggIT09IDAgJiYgcHdkLmxlbmd0aCAhPT0gMCkge1xuICAgICAgY29uc3QgdXNlck5hbWVSZWdleCA9IC9eW2EtekEtWjAtOS5fXXsxLDMwfSQvO1xuICAgICAgY29uc3QgbmFtZVZlcmlmaWVzID0gdXNlck5hbWVSZWdleC50ZXN0KG5hbWUpO1xuXG4gICAgICBpZiAobmFtZVZlcmlmaWVzKSB7XG4gICAgICAgICQucG9zdCgnL2xvZ2luJywge1xuICAgICAgICAgICAgdXNlcm5hbWU6IG5hbWUsXG4gICAgICAgICAgICBwYXNzd29yZDogcHdkXG4gICAgICAgICAgfSlcbiAgICAgICAgICAuZmFpbChmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZVRleHQgPSBkYXRhLnJlc3BvbnNlSlNPTjtcbiAgICAgICAgICAgIGlmIChkYXRhLnN0YXR1cyA9PT0gNDAwKSB7XG4gICAgICAgICAgICAgIHNob3dNZXNzYWdlKHJlc3BvbnNlVGV4dFswXS5tc2csICdlcnJvcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGEuc3RhdHVzID09PSA0MDEpIHtcbiAgICAgICAgICAgICAgc2hvd01lc3NhZ2UocmVzcG9uc2VUZXh0Lm1zZywgJ2Vycm9yJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuZG9uZShmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvdXNlci9ob21lJztcbiAgICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNob3dFcnJvckNpcmNsZSgndXNlck5hbWUnKTtcbiAgICAgICAgc2hvd01lc3NhZ2UoJ1VzZXJuYW1lcyBjYW4gb25seSB1c2UgbGV0dGVycywgbnVtYmVycywgdW5kZXJzY29yZXMgYW5kIHBlcmlvZHMuJywgJ2Vycm9yJyk7XG5cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuXG4gICAgICBpZiAobmFtZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgc2hvd0Vycm9yQ2lyY2xlKCd1c2VyTmFtZScpO1xuICAgICAgICAkKCcjZW1wdHlGaWVsZHMnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgfVxuICAgICAgaWYgKHB3ZC5sZW5ndGggPT0gMCkge1xuICAgICAgICBzaG93RXJyb3JDaXJjbGUoJ3VzZXJQYXNzd29yZCcpO1xuICAgICAgICAkKCcjZW1wdHlGaWVsZHMnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZVVwZGF0ZVByb2ZpbGUoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIGNsZWFyTWVzc2FnZSgpO1xuXG4gICAgY29uc3QgdXNlcm5hbWUgPSAkKCcjdXNlck5hbWUnKS52YWwoKTtcbiAgICBjb25zdCBlbWFpbCA9ICQoJyNlbWFpbCcpLnZhbCgpO1xuXG4gICAgaWYgKHVzZXJuYW1lLmxlbmd0aCAhPT0gMCAmJiBlbWFpbC5sZW5ndGggIT09IDApIHtcblxuICAgICAgY29uc3QgcGF0dGVybiA9IC9eW2EtekEtWjAtOS5fXXsxLDMwfSQvO1xuICAgICAgY29uc3QgbmFtZVZlcmlmaWVzID0gcGF0dGVybi50ZXN0KHVzZXJuYW1lKTtcbiAgICAgIGlmIChuYW1lVmVyaWZpZXMpIHtcbiAgICAgICAgJC5wb3N0KCcvdXNlci9lZGl0UHJvZmlsZScsIHtcbiAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSxcbiAgICAgICAgICAgIGVtYWlsOiBlbWFpbFxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmZhaWwoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgaWYgKGRhdGEuc3RhdHVzID09PSA0MDApIHtcbiAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VUZXh0ID0gZGF0YS5yZXNwb25zZUpTT047XG4gICAgICAgICAgICAgIGlmIChyZXNwb25zZVRleHQubGVuZ3RoID49IDEpIHtcbiAgICAgICAgICAgICAgICBzaG93TWVzc2FnZShyZXNwb25zZVRleHRbMF0ubXNnLCAnZXJyb3InKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzaG93TWVzc2FnZShyZXNwb25zZVRleHQubXNnLCAnZXJyb3InKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pXG4gICAgICAgICAgLmRvbmUoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgc2hvd01lc3NhZ2UoZGF0YS5tc2csICdtc2cnKTtcbiAgICAgICAgICAgICQoJyNsb2dpbkxpbmsnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICAgICAgJCgnLmJ0bnMnKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2hvd0Vycm9yQ2lyY2xlKCd1c2VyTmFtZScpO1xuICAgICAgICBzaG93TWVzc2FnZSgnVXNlcm5hbWVzIGNhbiBvbmx5IHVzZSBsZXR0ZXJzLCBudW1iZXJzLCB1bmRlcnNjb3JlcyBhbmQgcGVyaW9kcy4nLCAnZXJyb3InKTtcblxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodXNlcm5hbWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHNob3dFcnJvckNpcmNsZSgndXNlck5hbWUnKTtcbiAgICAgICAgJCgnI2VtcHR5RmllbGRzJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAgIH1cbiAgICAgIGlmIChlbWFpbC5sZW5ndGggPT0gMCkge1xuICAgICAgICBzaG93RXJyb3JDaXJjbGUoJ2VtYWlsJyk7XG4gICAgICAgICQoJyNlbXB0eUZpZWxkcycpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlVmVyaWZ5VXNlcihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgY2xlYXJNZXNzYWdlKCk7XG5cbiAgICBjb25zdCB1c2VybmFtZSA9ICQoJyN1c2VybmFtZScpLnZhbCgpO1xuXG4gICAgaWYgKHVzZXJuYW1lLmxlbmd0aCAhPT0gMCkge1xuXG4gICAgICAkLnBvc3QoJy92ZXJpZnlVc2VyJywge1xuICAgICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZVxuICAgICAgICB9KVxuICAgICAgICAuZmFpbChmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgaWYgKGRhdGEuc3RhdHVzID09PSA0MDEpIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlVGV4dCA9IGRhdGEucmVzcG9uc2VKU09OO1xuICAgICAgICAgICAgc2hvd01lc3NhZ2UocmVzcG9uc2VUZXh0Lm1zZywgJ2Vycm9yJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuZG9uZShmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgJCgnI3VzZXJuYW1lJykudmFsKCcnKTtcbiAgICAgICAgICAkKCcjZm9yZ290UGFzc3dvcmQnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICAgICQoJyNjb25maXJtVXNlcicpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgICAgICAgdXNlciA9IGRhdGE7XG4gICAgICAgIH0pO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh1c2VybmFtZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgc2hvd0Vycm9yQ2lyY2xlKCd1c2VybmFtZScpO1xuICAgICAgICAkKCcjZW1wdHlGaWVsZHMnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZVVwZGF0ZVBhc3N3b3JkKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY2xlYXJNZXNzYWdlKCk7XG5cbiAgICBjb25zdCBuZXdQd2QgPSAkKCcjbmV3UGFzc3dvcmQnKS52YWwoKTtcbiAgICBjb25zdCBjb25maXJtUHdkID0gJCgnI2NvbmZpcm1QYXNzd29yZCcpLnZhbCgpO1xuXG4gICAgaWYgKG5ld1B3ZC5sZW5ndGggPT09IDApIHtcbiAgICAgIHNob3dFcnJvckNpcmNsZSgnbmV3UGFzc3dvcmQnKTtcbiAgICAgICQoJyNlbXB0eUZpZWxkcycpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpcm1Qd2QubGVuZ3RoID09PSAwKSB7XG4gICAgICBzaG93RXJyb3JDaXJjbGUoJ2NvbmZpcm1QYXNzd29yZCcpO1xuICAgICAgJCgnI2VtcHR5RmllbGRzJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICB9XG5cbiAgICBpZiAobmV3UHdkLmxlbmd0aCAhPT0gMCAmJiBjb25maXJtUHdkICE9PSBuZXdQd2QpIHtcbiAgICAgIHNob3dFcnJvckNpcmNsZSgnY29uZmlybVBhc3N3b3JkJyk7XG4gICAgICAkKCcjZW1wdHlGaWVsZHMnKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgc2hvd01lc3NhZ2UoJ0NvbmZpcm0gcGFzc3dvcmQgZG9lc25cXCd0IG1hdGNoIHdpdGggdGhlIG5ldyBwYXNzd29yZCcsICdlcnJvcicpO1xuICAgIH1cblxuICAgIGlmIChuZXdQd2QubGVuZ3RoICE9PSAwICYmIGNvbmZpcm1Qd2QubGVuZ3RoICE9PSAwICYmIG5ld1B3ZCA9PT0gY29uZmlybVB3ZCkge1xuICAgICAgJC5wb3N0KCcvZm9yZ290UGFzc3dvcmQnLCB7XG4gICAgICAgICAgbmV3UGFzc3dvcmQ6IG5ld1B3ZCxcbiAgICAgICAgICB1c2VyOiB1c2VyXG4gICAgICAgIH0pXG4gICAgICAgIC5mYWlsKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICBpZiAoZGF0YS5zdGF0dXMgPT09IDQwMCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VUZXh0ID0gZGF0YS5yZXNwb25zZUpTT047XG4gICAgICAgICAgICBzaG93TWVzc2FnZShyZXNwb25zZVRleHQubXNnLCAnZXJyb3InKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICBzaG93TWVzc2FnZShkYXRhLm1zZywgJ21zZycpO1xuICAgICAgICAgICQoJy5idG5zJykuYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgICAkKCcjbG9naW5MaW5rJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlQ2hhbmdlUGFzc3dvcmQoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjbGVhck1lc3NhZ2UoKTtcblxuICAgIGNvbnN0IG9sZFB3ZCA9ICQoJyNvbGRQYXNzd29yZCcpLnZhbCgpO1xuICAgIGNvbnN0IG5ld1B3ZCA9ICQoJyNuZXdQYXNzd29yZCcpLnZhbCgpO1xuICAgIGNvbnN0IGNvbmZpcm1Qd2QgPSAkKCcjY29uZmlybVBhc3N3b3JkJykudmFsKCk7XG5cbiAgICBpZiAobmV3UHdkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgc2hvd0Vycm9yQ2lyY2xlKCduZXdQYXNzd29yZCcpO1xuICAgICAgJCgnI2VtcHR5RmllbGRzJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICB9XG5cbiAgICBpZiAoY29uZmlybVB3ZC5sZW5ndGggPT09IDApIHtcbiAgICAgIHNob3dFcnJvckNpcmNsZSgnY29uZmlybVBhc3N3b3JkJyk7XG4gICAgICAkKCcjZW1wdHlGaWVsZHMnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgIH1cblxuICAgIGlmIChuZXdQd2QubGVuZ3RoICE9PSAwICYmIGNvbmZpcm1Qd2QgIT09IG5ld1B3ZCkge1xuICAgICAgc2hvd0Vycm9yQ2lyY2xlKCdjb25maXJtUGFzc3dvcmQnKTtcbiAgICAgICQoJyNlbXB0eUZpZWxkcycpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgICBzaG93TWVzc2FnZSgnQ29uZmlybSBwYXNzd29yZCBkb2VzblxcJ3QgbWF0Y2ggd2l0aCB0aGUgbmV3IHBhc3N3b3JkJywgJ2Vycm9yJyk7XG4gICAgfVxuXG4gICAgaWYgKG5ld1B3ZC5sZW5ndGggIT09IDAgJiYgY29uZmlybVB3ZC5sZW5ndGggIT09IDAgJiYgbmV3UHdkID09PSBjb25maXJtUHdkKSB7XG4gICAgICAkLnBvc3QoJy91c2VyL2NoYW5nZVBhc3N3b3JkJywge1xuICAgICAgICAgIG9sZFBhc3N3b3JkOiBvbGRQd2QsXG4gICAgICAgICAgbmV3UGFzc3dvcmQ6IG5ld1B3ZFxuICAgICAgICB9KVxuICAgICAgICAuZmFpbChmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgaWYgKGRhdGEuc3RhdHVzID09PSA0MDApIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlVGV4dCA9IGRhdGEucmVzcG9uc2VKU09OO1xuICAgICAgICAgICAgc2hvd01lc3NhZ2UocmVzcG9uc2VUZXh0Lm1zZywgJ2Vycm9yJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuZG9uZShmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgc2hvd01lc3NhZ2UoZGF0YS5tc2csICdtc2cnKTtcbiAgICAgICAgICAkKCcuYnRucycpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgICAgICAgJCgnI2xvZ2luTGluaycpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuXG5cbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZVNpZ25VcChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNsZWFyTWVzc2FnZSgpO1xuXG4gICAgY29uc3QgbmFtZSA9ICQoXCIjdXNlck5hbWVcIikudmFsKCk7XG4gICAgY29uc3QgZW1haWwgPSAkKFwiI3VzZXJFbWFpbFwiKS52YWwoKTtcbiAgICBjb25zdCBwd2QgPSAkKFwiI3VzZXJQYXNzd29yZFwiKS52YWwoKTtcbiAgICBjb25zdCBjb25maXJtcHdkID0gJChcIiNjb25maXJtUGFzc3dvcmRcIikudmFsKCk7XG4gICAgY29uc3QgdXNlck5hbWVSZWdleCA9IC9eW2EtekEtWjAtOS5fXXsxLDMwfSQvO1xuICAgIGNvbnN0IG5hbWVWZXJpZmllcyA9IHVzZXJOYW1lUmVnZXgudGVzdChuYW1lKTtcblxuXG4gICAgaWYgKG5hbWUubGVuZ3RoID09PSAwKSB7XG4gICAgICBzaG93RXJyb3JDaXJjbGUoJ3VzZXJOYW1lJyk7XG4gICAgICAkKCcjZW1wdHlGaWVsZHMnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgIH1cblxuICAgIGlmICghbmFtZVZlcmlmaWVzICYmIG5hbWUubGVuZ3RoICE9PSAwKSB7XG4gICAgICBzaG93RXJyb3JDaXJjbGUoJ3VzZXJOYW1lJyk7XG4gICAgICBzaG93TWVzc2FnZSgnVXNlcm5hbWVzIGNhbiBvbmx5IHVzZSBsZXR0ZXJzLCBudW1iZXJzLCB1bmRlcnNjb3JlcyBhbmQgcGVyaW9kcy4nLCAnZXJyb3InKTtcbiAgICB9XG5cbiAgICBpZiAoZW1haWwubGVuZ3RoID09PSAwKSB7XG4gICAgICBzaG93RXJyb3JDaXJjbGUoJ3VzZXJFbWFpbCcpO1xuICAgICAgJCgnI2VtcHR5RmllbGRzJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICB9XG5cbiAgICBpZiAocHdkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgc2hvd0Vycm9yQ2lyY2xlKCd1c2VyUGFzc3dvcmQnKTtcbiAgICAgICQoJyNlbXB0eUZpZWxkcycpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgfVxuXG4gICAgaWYgKGNvbmZpcm1wd2QubGVuZ3RoID09PSAwKSB7XG4gICAgICBzaG93RXJyb3JDaXJjbGUoJ2NvbmZpcm1QYXNzd29yZCcpO1xuICAgICAgJCgnI2VtcHR5RmllbGRzJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICB9XG5cbiAgICBpZiAocHdkLmxlbmd0aCAhPT0gMCAmJiBjb25maXJtcHdkLmxlbmd0aCAhPT0gMCAmJiBjb25maXJtcHdkICE9PSBwd2QpIHtcbiAgICAgIHNob3dFcnJvckNpcmNsZSgnY29uZmlybVBhc3N3b3JkJyk7XG4gICAgICAkKCcjZW1wdHlGaWVsZHMnKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgc2hvd01lc3NhZ2UoJ0NvbmZpcm0gcGFzc3dvcmQgZG9lc25cXCd0IG1hdGNoIHdpdGggcGFzc3dvcmQnLCAnZXJyb3InKTtcbiAgICAgIGlmIChlbWFpbC5sZW5ndGggPT09IDAgfHwgbmFtZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgJCgnI2VtcHR5RmllbGRzJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBjb25zdCBlcnJvciA9ICdVc2VybmFtZXMgY2FuIG9ubHkgdXNlIGxldHRlcnMsIG51bWJlcnMsIHVuZGVyc2NvcmVzIGFuZCBwZXJpb2RzLic7XG4gICAgLy8gY29uc3QgbmFtZSA9ICdPTElWRSc7XG4gICAgLy8gY29uc3QgcHdkID0gJ09MSVZFJztcbiAgICAvLyBjb25zdCBlbWFpbCA9ICdnZWV0YUBnbWFpbC5jb20nO1xuICAgIGlmIChuYW1lLmxlbmd0aCAhPT0gMCAmJiBwd2QubGVuZ3RoICE9PSAwICYmIGNvbmZpcm1wd2QubGVuZ3RoICE9PSAwXG4gICAgICAmJiBlbWFpbC5sZW5ndGggIT09IDAgJiYgcHdkID09PSBjb25maXJtcHdkICYmIG5hbWVWZXJpZmllcykge1xuICAgICAgJC5wb3N0KCcvc2lnbnVwJywge1xuICAgICAgICAgIHVzZXJuYW1lOiBuYW1lLFxuICAgICAgICAgIHBhc3N3b3JkOiBwd2QsXG4gICAgICAgICAgZW1haWw6IGVtYWlsXG4gICAgICAgIH0pXG4gICAgICAgIC5mYWlsKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICBpZiAoZGF0YS5zdGF0dXMgPT09IDQwMCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VUZXh0ID0gZGF0YS5yZXNwb25zZUpTT047XG4gICAgICAgICAgICBpZiAocmVzcG9uc2VUZXh0Lmxlbmd0aCA+PSAxKSB7XG4gICAgICAgICAgICAgIHNob3dNZXNzYWdlKHJlc3BvbnNlVGV4dFswXS5tc2csICdlcnJvcicpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgc2hvd01lc3NhZ2UocmVzcG9uc2VUZXh0Lm1zZywgJ2Vycm9yJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAuZG9uZShmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgc2hvd01lc3NhZ2UoZGF0YS5tc2csICdtc2cnKTtcbiAgICAgICAgICAkKCcuYnRucycpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgICAgICAgJCgnI2xvZ2luTGluaycpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRpc3BsYXlTZWFyY2hCYXIoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICQoJyNoZWFkZXJEaXYnKS5yZW1vdmVDbGFzcygnc2hvdycpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgJCgnI3NlYXJjaCcpLmFkZENsYXNzKCdzaG93Jyk7XG4gIH1cblxuICBmdW5jdGlvbiBoaWRlU2VhcmNoQmFyKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAkKCcjaGVhZGVyRGl2JykucmVtb3ZlQ2xhc3MoJ2hpZGUnKS5hZGRDbGFzcygnc2hvdycpO1xuICAgICQoJyNzZWFyY2gnKS5yZW1vdmVDbGFzcygnc2hvdycpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2hvd1VzZXJNZW51RChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IHVzZXJJY29uID0gJCgnI3VzZXItbWVudScpO1xuICAgIGlmICghdXNlckljb24uaGFzQ2xhc3MoJ3Nob3cnKSkge1xuICAgICAgJCgnI3VzZXItbWVudScpLmFkZENsYXNzKCdzaG93Jyk7XG4gICAgfSBlbHNlIHtcbiAgICAgICQoJyN1c2VyLW1lbnUnKS5yZW1vdmVDbGFzcygnc2hvdycpO1xuICAgIH1cblxuICB9XG5cbiAgZnVuY3Rpb24gc2hvd1VzZXJNZW51KGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgdXNlckljb24gPSAkKCcjdXNlci1tZW51Jyk7XG4gICAgJCgnI3VzZXItbWVudScpLmFkZENsYXNzKCdzaG93Jyk7XG4gICAgdXNlckljb24uY3NzKCd3aWR0aCcsICcyNTBweCcpO1xuICAgIHVzZXJJY29uLnByZXBlbmQoJzxkaXYgY2xhc3M9XCJjbG9zZS1pY29uXCI+PGkgY2xhc3M9XCJmaS14XCI+PC9pPjwvZGl2PicpO1xuICB9XG5cbiAgZnVuY3Rpb24gaGlkZVVzZXJNZW51KGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgdXNlckljb24gPSAkKCcjdXNlci1tZW51Jyk7XG4gICAgJCgnI3VzZXItbWVudScpLnJlbW92ZUNsYXNzKCdzaG93Jyk7XG4gICAgdXNlckljb24uY3NzKCd3aWR0aCcsICcxODBweCcpO1xuICAgICQoJy5jbG9zZS1pY29uJykucmVtb3ZlKCk7XG5cblxuICB9XG5cblxuXG5cblxuICAvKipcbiAgICogVXRpbGl0eSBmdW5jdGlvbnNcbiAgICovXG5cbiAgZnVuY3Rpb24gY2xlYXJNZXNzYWdlKCkge1xuICAgICQoJyNlcnJvcicpLmVtcHR5KCk7XG4gICAgJCgnI21zZycpLmVtcHR5KCk7XG4gICAgJCgnI2VtcHR5RmllbGRzJykuYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgICAkKCcuaWNvbi1lcnJvcicpLnJlbW92ZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2hvd01lc3NhZ2UobXNnVHh0LCBtc2dEaXYpIHtcbiAgICB2YXIgdWxFbGUgPSAkKCcjbXNnY29udCcpO1xuICAgIGlmICh1bEVsZS5sZW5ndGggPT09IDApIHtcbiAgICAgIHVsRWxlID0gJCgnPHVsIGlkPVxcJ21zZ2NvbnRcXCc+PC91bD4nKTtcbiAgICB9XG4gICAgdWxFbGUuYXBwZW5kKCc8bGk+JyArIG1zZ1R4dCArICc8L2xpPicpO1xuICAgICQoJyMnICsgbXNnRGl2KS5odG1sKHVsRWxlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3dFcnJvckNpcmNsZShjaXJjbGVJbnApIHtcbiAgICBjb25zdCBpbnBFbGUgPSAkKCcjJyArIGNpcmNsZUlucCk7XG4gICAgY29uc3Qgc3BhbkVsZSA9ICQoJzxzcGFuIGNsYXNzPVxcJ2ljb24tZXJyb3JcXCc+PGkgY2xhc3M9XFwnZmkteC1jaXJjbGVcXCc+PC9pPjwvc3Bhbj4nKTtcbiAgICBpbnBFbGUuYWZ0ZXIoc3BhbkVsZSk7XG4gIH1cblxuXG5cblxufSgpKTtcbiJdfQ==
