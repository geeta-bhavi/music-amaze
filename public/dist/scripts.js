"use strict";$(function(){var e=null;function t(e){$.post("/update/playCount/"+e).fail(function(e){console.log(e)}).done(function(e){console.log(e)})}function s(){0===$("li.trackList.highlight").prev().length?$("#trackPrev").addClass("inactive"):$("#trackPrev").removeClass("inactive"),0===$("li.trackList.highlight").next().length?$("#trackNext").addClass("inactive"):$("#trackNext").removeClass("inactive"),$("#trackShuffle").removeClass("inactive"),$("#trackLike").removeClass("active"),$("#trackDislike").removeClass("active"),0===$("li.trackList.highlight").prev().length&&0===$("li.trackList.highlight").next().length&&$("#trackShuffle").addClass("inactive"),0===$("li.trackList.highlight").length?($("#trackPlaylist").addClass("inactive"),$("#trackLike").addClass("inactive"),$("#trackDislike").addClass("inactive")):($("#trackPlaylist").removeClass("inactive"),$("#trackLike").removeClass("inactive"),$("#trackDislike").removeClass("inactive"));var e=$("li.trackList.highlight").attr("data-like"),t=$("li.trackList.highlight").attr("data-dislike");"true"==e&&$("#trackLike").addClass("active"),"true"==t&&$("#trackDislike").addClass("active")}$(document).foundation(),$(".homeSlide").slick({slidesToShow:1,slidesToScroll:1,autoplay:!0,autoplaySpeed:2e3,infinite:!0,dots:!0}),window.location.pathname.indexOf("play")&&$("#audioPlayer").mediaelementplayer({stretching:"responsive",pluginPath:"../js/lib/build/",success:function(a,l,i){e=a,s(),e.play(),$(e).on("playing",function(){t($("li.trackList.highlight").attr("id")),$(e).off("playing")}),$(a).on("ended",function(){if($("#trackShuffle").hasClass("active")){var l=$("li.trackList").length,i=Math.floor(Math.random()*l+1);(o=$("li.trackList:nth-child("+i+")")).hasClass("highlight")&&0===(o=o.next()).length&&(o=$("li.trackList:nth-child(1)")),o.click()}else{var o=$("li.trackList.highlight").next();if($("#trackRepeat").hasClass("active"))a.play(),t($("li.trackList.highlight").attr("id"));else 0===o.length?(!function(s){$(".trackList").removeClass("highlight"),$(".trackItem").removeClass("fi-sound"),s.addClass("highlight"),s.find(".trackItem").addClass("fi-sound");var a=s.data("track-src");e.setSrc(a),e.load(),$(e).on("playing",function(){var a=s.attr("id");t(a),$(e).off("playing")})}($("li.trackList").first()),s()):o.click()}})},error:function(e,t){alert("There is some error at the server playing the track!")}}),$(window).on("load resize",function(){$("#footer");$(".title-bar").is(":visible")?$("#index-menu").removeClass("addFloat"):$("#index-menu").addClass("addFloat");$(window).width()<400?($(".menuDiv").addClass("menuMode"),$("#user-menu").addClass("menuMod"),$("#user-menu").removeClass("show")):($("#user-menu").removeClass("show"),$("#user-menu").css("width","180px"),$(".close-icon").remove(),$(".menuDiv").removeClass("menuMode"),$("#user-menu").removeClass("menuMod"))}),$(document).on("click",function(e){0===$(e.target).closest(".userMenu").length&&$("#user-menu").removeClass("show")}),$("#login").on("submit",function(e){e.preventDefault(),L();var t=$.trim($("#userName").val()),s=$.trim($("#userPassword").val());if(0!==t.length&&0!==s.length){var a=/^[a-zA-Z0-9._]{1,30}$/.test(t);a?$.post("/login",{username:t,password:s}).fail(function(e){var t=e.responseJSON;400===e.status&&T(t[0].msg,"error"),401===e.status&&T(t.msg,"error")}).done(function(e){window.location.href="/user/home"}):(N("userName"),T("Usernames can only use letters, numbers, underscores and periods.","error"))}else 0===t.length&&(N("userName"),$("#emptyFields").removeClass("hide")),0==s.length&&(N("userPassword"),$("#emptyFields").removeClass("hide"))}),$("#editProfile").on("submit",function(e){e.preventDefault(),L();var t=$.trim($("#userName").val()),s=$.trim($("#email").val());if(0!==t.length&&0!==s.length){var a=/^[a-zA-Z0-9._]{1,30}$/.test(t);a?$.post("/user/editProfile",{username:t,email:s}).fail(function(e){if(400===e.status){var t=e.responseJSON;t.length>=1?T(t[0].msg,"error"):T(t.msg,"error")}}).done(function(e){T(e.msg,"msg"),$("#loginLink").removeClass("hide"),$(".btns").addClass("hide")}):(N("userName"),T("Usernames can only use letters, numbers, underscores and periods.","error"))}else 0===t.length&&(N("userName"),$("#emptyFields").removeClass("hide")),0==s.length&&(N("email"),$("#emptyFields").removeClass("hide"))}),$("#confirmUser").on("submit",function(e){e.preventDefault(),L();var t=$("#username").val();0!==t.length?$.post("/verifyUser",{username:t}).fail(function(e){if(401===e.status){var t=e.responseJSON;T(t.msg,"error")}}).done(function(e){$("#username").val(""),$("#forgotPassword").removeClass("hide"),$("#confirmUser").addClass("hide"),a=e}):0===t.length&&(N("username"),$("#emptyFields").removeClass("hide"))}),$("#forgotPassword").on("submit",function(e){e.preventDefault(),L();var t=$.trim($("#newPassword").val()),s=$.trim($("#confirmPassword").val());0===t.length&&(N("newPassword"),$("#emptyFields").removeClass("hide"));0===s.length&&(N("confirmPassword"),$("#emptyFields").removeClass("hide"));0!==t.length&&s!==t&&(N("confirmPassword"),$("#emptyFields").addClass("hide"),T("Confirm password doesn't match with the new password","error"));0!==t.length&&0!==s.length&&t===s&&$.post("/forgotPassword",{newPassword:t,user:a}).fail(function(e){if(400===e.status){var t=e.responseJSON;T(t.msg,"error")}}).done(function(e){T(e.msg,"msg"),$(".btns").addClass("hide"),$("#loginLink").removeClass("hide")})}),$("#signup").on("submit",function(e){e.preventDefault(),L();var t=$.trim($("#userName").val()),s=$.trim($("#userEmail").val()),a=$.trim($("#userPassword").val()),l=$.trim($("#confirmPassword").val()),i=/^[a-zA-Z0-9._]{1,30}$/.test(t);0===t.length&&(N("userName"),$("#emptyFields").removeClass("hide"));i||0===t.length||(N("userName"),T("Usernames can only use letters, numbers, underscores and periods.","error"));0===s.length&&(N("userEmail"),$("#emptyFields").removeClass("hide"));0===a.length&&(N("userPassword"),$("#emptyFields").removeClass("hide"));0===l.length&&(N("confirmPassword"),$("#emptyFields").removeClass("hide"));0!==a.length&&0!==l.length&&l!==a&&(N("confirmPassword"),$("#emptyFields").addClass("hide"),T("Confirm password doesn't match with password","error"),0!==s.length&&0!==t.length||$("#emptyFields").removeClass("hide"));0!==t.length&&0!==a.length&&0!==l.length&&0!==s.length&&a===l&&i&&$.post("/signup",{username:t,password:a,email:s}).fail(function(e){if(400===e.status){var t=e.responseJSON;t.length>=1?T(t[0].msg,"error"):T(t.msg,"error")}}).done(function(e){T(e.msg,"msg"),$(".btns").addClass("hide"),$("#loginLink").removeClass("hide")})}),$("#reset").on("click",L),$("#changePassword").on("submit",function(e){e.preventDefault(),L();var t=$.trim($("#oldPassword").val()),s=$.trim($("#newPassword").val()),a=$.trim($("#confirmPassword").val());0===t.length&&(N("oldPassword"),$("#emptyFields").removeClass("hide"));0===s.length&&(N("newPassword"),$("#emptyFields").removeClass("hide"));0===a.length&&(N("confirmPassword"),$("#emptyFields").removeClass("hide"));0!==s.length&&0!==a.length&&a!==s&&(N("confirmPassword"),$("#emptyFields").addClass("hide"),T("Confirm password doesn't match with the new password","error"),0===t.length&&$("#emptyFields").removeClass("hide"));0!==t.length&&0!==s.length&&0!==a.length&&s===a&&$.post("/user/changePassword",{oldPassword:t,newPassword:s}).fail(function(e){if(400===e.status){var t=e.responseJSON;T(t.msg,"error")}}).done(function(e){T(e.msg,"msg"),$(".btns").addClass("hide"),$("#loginLink").removeClass("hide")})}),$("#searchIcon").on("click",l),$(".js-search-close").on("click",function(e){e.preventDefault(),$("#search-text").val(""),$("#headerDiv").removeClass("hide").addClass("show"),$("#search").removeClass("show"),$(".js-nonSearchView").removeClass("hide"),$(".js-searchView").addClass("hide"),-1===window.location.pathname.indexOf("user")&&(window.location.pathname="/user/home")}),$(".menuDiv").on("click",function(e){e.preventDefault(),$("#user-menu").hasClass("show")?$("#user-menu").removeClass("show"):$("#user-menu").addClass("show")}),$(".trackList").on("click",function(a){if(!$(this).hasClass("highlight")&&!$(a.target).hasClass("delete-track")&&!$(a.target).hasClass("deleteMenu")){$(".trackList").removeClass("highlight"),$(".trackItem").removeClass("fi-sound"),$(this).addClass("highlight"),$(this).find(".trackItem").addClass("fi-sound");var l=$(this).data("track-src");e.setSrc(l),e.load(),e.play(),s();var i=$(this).attr("id");t(i)}}),$("#search-text").on("keyup",function(e){13===e.keyCode&&i(e)}),$(".js-search-icon").on("click",i),$("#trackRepeat").on("click",function(e){e.preventDefault(),$(this).toggleClass("active")}),$("#trackLike").on("click",function(e){e.preventDefault(),$(this).toggleClass("active");var t=$(this).hasClass("active"),s="",a=$("li.trackList.highlight").attr("id");$("li.trackList.highlight").attr("data-like",t),t&&$("#trackDislike").hasClass("active")&&($("#trackDislike").removeClass("active"),s="false",$("li.trackList.highlight").attr("data-dislike",s)),$.post("/user/likeUnlike",{like:t,trackId:a,dislike:s}).fail(function(e){console.log(e)}).done(function(e){console.log(e)})}),$("#trackDislike").on("click",function(e){e.preventDefault(),$(this).toggleClass("active");var t=$(this).hasClass("active"),s="",a=$("li.trackList.highlight").attr("id");$("li.trackList.highlight").attr("data-dislike",t),t&&$("#trackLike").hasClass("active")&&($("#trackLike").removeClass("active"),s="false",$("li.trackList.highlight").attr("data-like",s)),$.post("/user/dislikeUndislike",{like:s,trackId:a,dislike:t}).fail(function(e){console.log(e)}).done(function(e){console.log(e)})}),$("#trackPrev").on("click",function(e){e.preventDefault(),$(this).hasClass("inactive")||($("li.trackList.highlight").prev().click(),s())}),$("#trackNext").on("click",function(e){e.preventDefault(),$(this).hasClass("inactive")||($("li.trackList.highlight").next().click(),s())}),$("#trackShuffle").on("click",function(e){e.preventDefault(),$(this).hasClass("inactive")||$(this).toggleClass("active")}),$(".delete-track").on("click",function(e){e.preventDefault();var t=$(this).next(".deleteMenu"),s=$(this).next(".deleteMenu").css("display");$(".deleteMenu").css("display","none"),"block"===s?t.css("display","none"):t.css("display","block")}),$(".deleteMenu").on("click",function(e){e.preventDefault();var t=$(this).closest("li.trackList"),a=t.attr("id"),l=$(".playlist-name").attr("data-playlist-id");$.post("/user/playlist/deleteTrack",{trackId:a,playlistId:l}).fail(function(e){console.log(e);var t=e.responseJSON;T(t.msg,"trackerror")}).done(function(e){console.log(e),t.remove(),s()})}),$(".editPlaylist").on("click",function(e){e.preventDefault(),$("li .trackTime").toggleClass("hide"),$("li .dragHandle").toggleClass("active"),$("li .deleteMenu").toggleClass("active"),"Edit"===$(this).text()?$("li .dragHandle").hasClass("active")&&($(this).html("Done"),$("#tracks").sortable({handle:"div.dragHandle",cursor:"grab",update:function(e,t){var a=$("#tracks").sortable("toArray"),l=a.reduce(function(e,t,s){return e[t]=s+1,e},{}),i=$("div.playlist-name").attr("data-playlist-id");$.post("/play/playlistChange/rearrangeData",{playlistId:i,sortedIds:l}).fail(function(e){console.log(e)}).done(function(e){console.log(e),s()})}}),$("#tracks div.dragHandle").disableSelection()):$(this).html("Edit")}),$("#concert-text").on("keyup",function(e){13===e.keyCode&&y(e)}),$(".js-concert-search").on("click",y),$("#stat-text").on("keyup",function(e){13===e.keyCode&&C(e)}),$(".js-stat-search").on("click",C),$("#pay").on("submit",function(e){e.preventDefault(),console.log("here"),$.post("/payment").fail(function(e){var t=e.responseJSON;T(t.msg,"error")}).done(function(e){console.log(e),window.location.href="/stats"})}),$(document).on("click",".searchHome",i),$(document).on("click",".stat-albums li a",function(e){e.preventDefault(),$("section.stat-results").addClass("hide");var t=$(this).attr("id"),s=$(this).find(".artistName").text();$.post("/statresults",{albumId:t,albumName:s}).fail(function(e){console.log(e),$("#stat-results").html(e)}).done(function(e){console.log(e),$("#stat-results").html(e),e.indexOf("albumDetails")>-1&&($("section.stat-results").removeClass("hide"),P())})}),$(document).on("click","ul.js-artists li a",function(e){e.preventDefault(),$(".apiloadingScreen").toggle("active");var t=$(this).attr("id"),s=$(this).find(".artistName").text();$.post("/searchconcert/findConcertsOfArtist",{artistId:t,artistName:s}).fail(function(e){$(".apiloadingScreen").toggle("active"),console.log(e),$("#concert-results").html(e)}).done(function(e){$(".apiloadingScreen").toggle("active"),console.log(e),$("#concert-results").html(e)})}),$(document).on("click","ul.js-locations li a",function(e){e.preventDefault(),$(".apiloadingScreen").toggle("active");var t=$(this).attr("id"),s=$(this).find(".artistName").text();$.post("/searchconcert/findConcertsOfLocation",{locationId:t,locationName:s}).fail(function(e){$(".apiloadingScreen").toggle("active"),console.log(e),$("#concert-results").html(e)}).done(function(e){$(".apiloadingScreen").toggle("active"),console.log(e),$("#concert-results").html(e)})}),$(document).on("click",".playListCreate",function(e){e.preventDefault(),L(),$(".playListPopup").slideToggle()}),$(document).on("click",".closebutton",c),$(document).on("click","#cancelBtn",c),$(document).on("click","#createBtn",d),$(document).on("keyup","#playlistName",function(e){13===e.keyCode&&d(e)}),$(document).on("click",".playlistHome a",function(e){if(e.preventDefault(),!($(e.target).hasClass("playlist-manage")||$(e.target).hasClass("playlistManage")||$(e.target).hasClass("editPlaylistName")||$(e.target).hasClass("deletePlaylist"))){var t=$(this).closest("li").attr("id");$.post("/play/playlist/"+t).fail(function(e){console.log(e);var t=e.responseJSON;T(t.msg,"playlistTrackError")}).done(function(e){e.msg>0&&(window.location.href="/play/playlist/"+t)})}}),$(document).on("click","#cancelDeleteBtn",h),$(document).on("click",".closeDelete",h),$(document).on("click",".deletePlaylist",function(e){e.preventDefault(),L();var t=$(this).data("playlist-id");$(".deletePlaylistPopup").slideToggle(),$("#deleteBtn").attr("data-playlist-id",t)}),$(document).on("click","#deleteBtn",function(e){e.preventDefault(),L();var t=$("#deleteBtn").attr("data-playlist-id"),s=9;"/user/playlists/seeAll"===window.location.pathname&&(s=5e3);$.post("/user/deletePlaylist",{playlistId:t,limit:s}).fail(function(e){console.log(e);var t=e.responseJSON;T(t.msg,"playListerror")}).done(function(e){$("#playlistCont").html(e)})}),$(document).on("click",".playlist-manage",function(e){e.preventDefault();var t=$(this).next(".playlist-actions"),s=$(this).next(".playlist-actions").css("display");$(".playlist-actions").css("display","none"),"block"===s?t.css("display","none"):t.css("display","block")}),$(document).on("click",".editPlaylistName",function(e){e.preventDefault(),L();var t=$(this).attr("data-playlist-id"),s=$(this).closest("li").find("span.playlistName").html();$(".editPlaylistPopup").slideToggle(),$("#editplaylistName").val(s),$("#editBtn").attr("data-playlist-id",t)}),$(document).on("click","#cancelEditBtn",u),$(document).on("click",".closeEdit",u),$(document).on("click","#editBtn",m),$(document).on("keyup","#editplaylistName",function(e){13===e.keyCode&&m(e)}),$(document).on("click",".seeAllPlaylists",r),$(document).on("click","#trackPlaylist",function(e){if(e.preventDefault(),!$(this).hasClass("inactive")){L();var t=$("li.trackList.highlight").attr("id");$.post("/user/playlists").fail(function(e){console.log(e);var t=e.responseJSON;T(t.msg,"playListerror")}).done(function(e){$("#playlistCont").html(e)}),$(".addToPlaylistPopup").slideToggle(),$(".addToPlaylistPopup").attr("data-track-id",t)}}),$(document).on("click",".closeAddToPlaylist",p),$(document).on("click",".playlist_add",function(e){e.preventDefault();var t=$(".addToPlaylistPopup").attr("data-track-id"),s=$(this).attr("id");$.post("/user/playlist/addtracktoplaylist",{trackId:t,playlistId:s}).fail(function(e){var t=e.responseJSON;T(t.msg,"playListerror")}).done(function(t){$("#playlistCont").html(t),p(e)})}),$(document).on("click",".addTo_playlist a",function(e){e.preventDefault()}),$(document).on("click",".menuMode",function(e){e.preventDefault();var t=$("#user-menu");$("#user-menu").addClass("show"),t.css("width","250px"),t.prepend('<div class="close-icon"><i class="fi-x"></i></div>')}),$(document).on("click",".close-icon",function(e){e.preventDefault();var t=$("#user-menu");$("#user-menu").removeClass("show"),t.css("width","180px"),$(".close-icon").remove()}),$(document).on("click",".seeAllR",n),$(document).on("click",".homeTabsList li a.js-sup",function(e,t){e.preventDefault();var s=$(this).attr("data-tab-category");$(".homeTabsList li a").removeClass("active"),$(this).addClass("active"),"playlistTab"===s?$.post("/user/playlists/seeAll").fail(function(e){$("#playlistCont").removeClass("hide"),$(".js-nonPlaylist").addClass("hide"),$("#playlistCont").html(e)}).done(function(e){if($("#playlistCont").removeClass("hide"),$(".js-nonPlaylist").addClass("hide"),$("#playlistCont").html(e),void 0===t){history.pushState({category:"playlist"},"","/user/playlists/seeAll")}}):"recommendTab"===s?g(t):"topTrendTab"===s?v(t):"playedTab"===s&&f(t)}),$(document).on("click",".js-chooseartist",function(e){e.preventDefault(),$(".artistList").slideToggle()}),$(document).on("click",".js-chooseLocation",function(e){e.preventDefault(),$(".locationList").slideToggle()});var a=null;function l(e){e&&e.preventDefault(),$("#headerDiv").removeClass("show").addClass("hide"),$("#search").addClass("show"),$(".js-nonSearchView").addClass("hide"),$(".js-searchView").removeClass("hide")}function i(e,t,s){null!==e&&e.preventDefault(),$(".js-searchView").empty();var a=void 0!==t?t:$.trim($("#search-text").val());a=a.replace(/\s+/g," "),(a=encodeURIComponent(a)).length>0&&" "!==a&&$.post("/search/"+a).fail(function(e){console.log(e),$("#searchCont").html(e)}).done(function(e){if($("#searchCont").html(e),$("#js-searchResults").removeClass("hide"),void 0===s){var t="/search/"+a;history.pushState({search:decodeURIComponent(a)},"",t)}})}if(null!==window.history.state){var o=window.history.state;void 0!==o.search&&void 0===o.category?(l(),$("#search-text").val(o.search),i(null,o.search,"noPopstate")):void 0!==o.search&&void 0!==o.category?(l(),$("#search-text").val(o.search),n(null,o.search,o.category,"noPopstate")):"playlist"===o.category?r(null,"noPopstate"):"recommendations"===o.category?g("noPopstate"):"topTrend"===o.category?v("noPopstate"):"mostPlayed"===o.category&&f("noPopstate")}function n(e,t,s,a){null!==e&&e.preventDefault();var l=void 0!==t?t:$(".searchStr").html(),i=void 0!==s?s:$(this).data("category");l=encodeURIComponent(l),$.post("/search/"+i+"/"+l).fail(function(e){$("#searchCont").html(e)}).done(function(e){if($("#searchCont").html(e),$("#js-searchResults").removeClass("hide"),void 0===a){var t="/search/"+i+"/"+l;history.pushState({search:decodeURIComponent(l),category:i},"",t)}})}function r(e,t){null!==e&&e.preventDefault(),$(".homeTabsList li a").removeClass("active"),$(".homeTabsList li a[data-tab-category='playlistTab']").addClass("active"),$.post("/user/playlists/seeAll").fail(function(e){$("#playlistCont").html(e)}).done(function(e){if($("#playlistCont").html(e),$(".js-nonPlaylist").addClass("hide"),void 0===t){history.pushState({category:"playlist"},"","/user/playlists/seeAll")}})}function c(e){e.preventDefault(),$(".playListPopup").slideToggle()}function d(e){e.preventDefault(),L();var t=$.trim($("#playlistName").val());0===t.length&&(N("playlistName"),$("#emptyFields").removeClass("hide")),t=encodeURIComponent(t);var s=9,a=!1;-1!==window.location.pathname.indexOf("/play/")&&(s=5e3,a=!0),"/user/playlists/seeAll"===window.location.pathname&&(s=5e3),0!==t.length&&$.post("/user/createPlaylist",{playlistName:t,limit:s,playPage:a}).fail(function(e){console.log(e),T(e.responseJSON.msg,"error")}).done(function(t){-1!==window.location.pathname.indexOf("/play/")&&c(e),$("#playlistCont").html(t)})}function h(e){e.preventDefault(),$(".deletePlaylistPopup").slideToggle(),$("#deleteBtn").removeAttr("data-playlist-id")}function u(e){e.preventDefault(),$(".editPlaylistPopup").slideToggle(),$("#editBtn").removeAttr("data-playlist-id")}function m(e){e.preventDefault(),L();var t=$("#editBtn").attr("data-playlist-id"),s=$.trim($("#editplaylistName").val());0===s.length&&(N("editplaylistName"),$("#emptyField").removeClass("hide")),0!==s.length&&(s=encodeURIComponent(s),$.post("/user/editPlaylistname",{playlistId:t,playlistname:s}).fail(function(e){console.log(e),T(e.responseJSON.msg,"editPlaylistError")}).done(function(s){console.log(s);var a=decodeURIComponent(s.msg);$("li#"+t).find("span.playlistName").html(a),u(e)}))}function p(e){e.preventDefault(),$(".addToPlaylistPopup").removeAttr("data-track-id"),$(".addToPlaylistPopup").slideToggle()}function g(e){$.post("/user/recommendations/seeAll").fail(function(e){$("section").addClass("hide"),$("#recommendationsCont").removeClass("hide"),$("#homeTabsCont").removeClass("hide"),$("#recommendationsCont").html(e)}).done(function(t){if($("section").addClass("hide"),$("#recommendationsCont").removeClass("hide"),$("#homeTabsCont").removeClass("hide"),$("#recommendationsCont").html(t),void 0===e){history.pushState({category:"recommendations"},"","/user/recommendations/seeAll")}})}function v(e){$.post("/user/topTrending/seeAll").fail(function(e){$("section").addClass("hide"),$("#topTrendCont").removeClass("hide"),$("#homeTabsCont").removeClass("hide"),$("#topTrendCont").html(e)}).done(function(t){if($("section").addClass("hide"),$("#topTrendCont").removeClass("hide"),$("#homeTabsCont").removeClass("hide"),$("#topTrendCont").html(t),void 0===e){history.pushState({category:"topTrend"},"","/user/topTrending/seeAll")}})}function f(e){$.post("/user/mostPlayed/seeAll").fail(function(e){var t=e;void 0!==e.responseJSON&&(t=e.responseJSON.msg),$("section").addClass("hide"),$("#mostPlayedCont").removeClass("hide"),$("#homeTabsCont").removeClass("hide"),$("#mostPlayedCont").html(t)}).done(function(t){if($("section").addClass("hide"),$("#mostPlayedCont").removeClass("hide"),$("#homeTabsCont").removeClass("hide"),$("#mostPlayedCont").html(t),void 0===e){history.pushState({category:"mostPlayed"},"","/user/mostPlayed/seeAll")}})}$(window).on("popstate",function(e){var t=e.originalEvent.state;if(null===t){var s=window.location.href;window.location.href=s}else void 0!==t.search&&void 0===t.category?(l(e),$("#search-text").val(t.search),i(e,t.search,"noPopstate")):void 0!==t.search&&void 0!==t.category?(l(e),$("#search-text").val(t.search),n(e,t.search,t.category,"noPopstate")):"playlist"===t.category?r(e,"noPopstate"):"recommendations"===t.category?g("noPopstate"):"topTrend"===t.category?v("noPopstate"):"mostPlayed"===t.category&&f("noPopstate")});function y(e){e.preventDefault(),$(".apiloadingScreen").toggle("active");var t=$.trim($("#concert-text").val());t=t.replace(/\s+/g," "),(t=encodeURIComponent(t)).length>0&&" "!==t&&$.post("/searchconcert",{concertText:t}).fail(function(e){$(".apiloadingScreen").toggle("active"),console.log(e),$("#concert-results").html(e)}).done(function(e){$(".apiloadingScreen").toggle("active"),console.log(e),$("#concert-results").html(e)})}function C(e){e.preventDefault(),$("section.stat-results").addClass("hide");var t=$.trim($("#stat-text").val());t=t.replace(/\s+/g," "),(t=encodeURIComponent(t)).length>0&&" "!==t?$.post("/searchstat",{statText:t}).fail(function(e){console.log(e),$("#stat-results").html(e)}).done(function(e){console.log(e),$("#stat-results").html(e),e.indexOf("albumDetails")>-1&&($("section.stat-results").removeClass("hide"),P())}):$("#stat-results").html("")}var k=[],w="";function P(){D(null),k=[];setTimeout(function(){console.log($("#latlng").html());for(var e=JSON.parse($("#latlng").html()),t=0;t<e.length;t++){var s=e[t].LOCATION_COUNT;w=s>=200?"/dist/assets/highMarker.png":s>=100&&s<=199?"/dist/assets/marker.png":"/dist/assets/lowMarker.png";var a=new google.maps.LatLng(e[t].LATITUDE,e[t].LONGITUDE),l=new google.maps.Marker({position:a,icon:w,map:map});k.push(l)}},500)}function D(e){for(var t=0;t<k.length;t++)k[t].setMap(e)}function L(){$("#error").empty(),$("#trackerror").empty(),$("#playListerror").empty(),$("#playlistTrackError").empty(),$("#editPlaylistError").empty(),$("#emptyField").addClass("hide"),$("#msg").empty(),$("#emptyFields").addClass("hide"),$(".icon-error").remove()}function T(e,t){var s=$("#msgcont");0===s.length&&(s=$("<ul id='msgcont'></ul>")),s.append("<li>"+e+"</li>"),$("#"+t).html(s)}function N(e){var t=$("#"+e),s=$("<span class='icon-error'><i class='fi-x-circle'></i></span>");t.after(s)}}());
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsiJCIsIm1lZGlhRWxlIiwidXBkYXRlTm9PZlBsYXlzIiwidHJhY2tJZCIsImNvbnNvbGUiLCJkb25lIiwiZGF0YSIsImxvZyIsImhpZ2hMaWdodFByZXZOZXh0IiwicHJldiIsImxlbmd0aCIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJuZXh0IiwibGlrZSIsImRpc2xpa2UiLCJhdHRyIiwibGlFbGUiLCJkb2N1bWVudCIsImZvdW5kYXRpb24iLCJzbGljayIsInNsaWRlc1RvU2hvdyIsInNsaWRlc1RvU2Nyb2xsIiwiYXV0b3BsYXkiLCJhdXRvcGxheVNwZWVkIiwid2luZG93IiwibG9jYXRpb24iLCJwYXRobmFtZSIsImluZGV4T2YiLCJtZWRpYWVsZW1lbnRwbGF5ZXIiLCJwbHVnaW5QYXRoIiwic3VjY2VzcyIsIm1lZGlhRWxlbWVudCIsIm9yaWdpbmFsTm9kZSIsImluc3RhbmNlIiwicGxheSIsIm9uIiwiaGFzQ2xhc3MiLCJsaUNvdW50IiwiZmxvb3IiLCJNYXRoIiwicmFuZG9tIiwiY2xpY2siLCJjYWxsRm9jdXMiLCJmaW5kIiwidHJhY2tTcmMiLCJzZXRTcmMiLCJvZmYiLCJoYW5kbGVVc2VyTGlrZSIsImFsZXJ0IiwiY3NzIiwid2lkdGgiLCJwcmV2ZW50RGVmYXVsdCIsInJlbW92ZSIsImNsZWFyTWVzc2FnZSIsIm5hbWUiLCJlIiwidGFyZ2V0IiwiY2xvc2VzdCIsInVzZXJuYW1lIiwicGFzc3dvcmQiLCJ0cmltIiwidmFsIiwicHdkIiwicmVzcG9uc2VUZXh0IiwicmVzcG9uc2VKU09OIiwic2hvd01lc3NhZ2UiLCJuYW1lVmVyaWZpZXMiLCJ0ZXN0IiwicG9zdCIsInNob3dFcnJvckNpcmNsZSIsInN0YXR1cyIsIm1zZyIsImhyZWYiLCJlbWFpbCIsInVzZXIiLCJmYWlsIiwiaGFuZGxlVXBkYXRlUGFzc3dvcmQiLCJjb25maXJtUHdkIiwibmV3UHdkIiwibmV3UGFzc3dvcmQiLCJoYW5kbGVDaGFuZ2VQYXNzd29yZCIsIm9sZFB3ZCIsImNvbmZpcm1wd2QiLCJoaWRlU2VhcmNoQmFyIiwiaGFuZGxlU2lnblVwIiwidXNlck5hbWVSZWdleCIsImRpc3BsYXlTZWFyY2hCYXIiLCJoaWRlVXNlck1lbnUiLCJ1c2VySWNvbiIsImNoYW5nZVRyYWNrIiwidGhpcyIsImxvYWQiLCJrZXlDb2RlIiwic2VhcmNoIiwic2h1ZmZsZVRyYWNrcyIsImxpbWl0IiwidG9nZ2xlQ2xhc3MiLCJoYW5kbGVVc2VyRGlzbGlrZSIsInBsYXlQcmV2aW91cyIsImRlbGV0ZUVsZSIsImNhbGxSZWNvbW1lbmRUYWIiLCJwb3BzdGF0ZSIsImNhdGVnb3J5IiwiZGlzcGxheVZhbCIsInBsYXlsaXN0SWQiLCJzdHIiLCJoaXN0b3J5IiwiYXJ0aXN0SWQiLCJhcnRpc3ROYW1lIiwic29ydGFibGUiLCJoYW5kbGUiLCJzb3J0ZWRJZHMiLCJvYmoiLCJyZWR1Y2UiLCJvIiwiaWR4IiwidG9nZ2xlIiwiZ2V0Q29uY2VydHNPZkxvY2F0aW9uIiwibG9jYXRpb25OYW1lIiwiaHRtbCIsInNlYXJjaFN0YXQiLCJzZWFyY2hDb25jZXJ0IiwiaW1hZ2UiLCJpbWFnZVNyYyIsIm1hcmtlcnMiLCJ0ZXh0IiwiYWxidW1OYW1lIiwidG9nZ2xlQXJ0aXN0cyIsInNsaWRlVG9nZ2xlIiwiY2FsbEdvb2dsZU1wYXMiLCJhbGJ1bUlkIiwibG9jYXRpb25JZCIsImRlbGV0ZU1hcmtlcnMiLCJzZXRUaW1lb3V0IiwicGFyc2UiLCJpIiwiY291bnQiLCJwbGF5bGlzdE5hbWUiLCJwbGF5UGFnZSIsImNsb3NlRGVsZXRlUGxheWxpc3QiLCJjbG9zZUNyZWF0ZVBsYXlsaXN0IiwiZGVsZXRlUGxheWxpc3QiLCJjcmVhdGVQbGF5bGlzdCIsImNsb3NlQWRkVG9QbGF5bGlzdCIsInJlbW92ZUF0dHIiLCJhZGRUb1BsYXlsaXN0IiwiY2xvc2VFZGl0UGxheWxpc3RQb3B1cCIsImVkaXRQbGF5bGlzdE5hbWUiLCJwbGF5bGlzdG5hbWUiLCJlbmNvZGVVUklDb21wb25lbnQiLCJwbGF5bGlzdEVsZSIsIm9wZW5EZWxldGVNZW51Iiwib3BlbkFkZFRvUGxheWxpc3QiLCJzaG93VXNlck1lbnUiLCJkZWxldGVUcmFjayIsInByZXBlbmQiLCJzZWVBbGxSZXN1bHRzIiwidW5kZWZpbmVkIiwicHVzaFN0YXRlIiwiY2FsbE1vc3RQbGF5ZWRUYWIiLCJyZXN1bHQiLCJjYWxsVG9wVHJlbmRUYWIiLCJjbG9zZU1lbnVzIiwiaGFuZGxlTG9hZCIsInN0YXRlIiwic2VhcmNoU3RyaW5nIiwicmVwbGFjZSIsInNlZUFsbFBsYXlsaXN0cyIsImRlY29kZVVSSUNvbXBvbmVudCIsIm9yaWdpbmFsRXZlbnQiLCJzcmNoU3RyIiwiY2F0ZWdyeSIsInNlYXJjaFN0ciIsImxpbmtBY3RpdmUiLCJjcmVhdGVQbGF5bGlzdE9uRW50ZXIiLCJvcGVuRGVsZXRlUGxheWxpc3RQb3B1cCIsIm9wZW5FZGl0UGxheWxpc3RQb3B1cCIsInNvcnRJZHMiLCJhbGxvd0RyYWdEcm9wIiwiY2FsbENvbmNlcnRTZWFyY2giLCJjb25jZXJ0VGV4dCIsInBhdGgiLCJzdGF0VGV4dCIsInBvc2l0aW9uIiwibWFwIiwic2V0TWFwT25BbGwiLCJjbGVhck1hcmtlcnMiLCJKU09OIiwiZW1wdHkiLCJtc2dUeHQiLCJ1bEVsZSIsIkxPQ0FUSU9OX0NPVU5UIiwiaW5wRWxlIiwiYWZ0ZXIiLCJzcGFuRWxlIiwiZ29vZ2xlIiwibWFwcyIsIkxhdExuZyIsIkxBVElUVURFIiwiTE9OR0lUVURFIiwibWFya2VyIiwiTWFya2VyIiwibGF0TG5nIiwiaWNvbiIsInB1c2giLCJzZXRNYXAiLCJtc2dEaXYiLCJhcHBlbmQiLCJjaXJjbGVJbnAiXSwibWFwcGluZ3MiOiJhQUFBQSxFQUFFLFdBQUEsSUFBQUMsRUFBVyxLQWdHVEQsU0FBQUUsRUFBQUMsR0FFSUMsRUFBQUEsS0FBQUEscUJBQUFELEdBRURFLEtBQUssU0FBQUMsR0FDSkYsUUFBUUcsSUFBSUQsS0FHakJELEtBQUEsU0FBQUMsR0FIS0YsUUFBUUcsSUFBSUQs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K0QsU0FBQXRGLEVBQUF1QixHQUFBZ0UsV0FDREMsRUFBQSxJQUFBTCxPQUFBQyxLQUFBSyxRQXRrREhsQixTQUFBbUIsRUFrL0NVQyxLQUFNakYsRUFDTjhELElBQUtBLE1BRVA1RCxFQUFRZ0YsS0FBS0osS0FFZCxLQUlMLFNBQVNmLEVBQVlELEdBQ25CLElBQUssSUFBSWpELEVBQUksRUFBR0EsRUFBSVgsRUFBUW5ILE9BQVE4SCxJQUNsQ1gsRUFBUVcsR0FBR3NFLE9BQU9yQixHQWdEdEIsU0FBU25JLElBQ1B0RCxFQUFFLFVBQVU2TCxRQUNaN0wsRUFBRSxlQUFlNkwsUUFDakI3TCxFQUFFLGtCQUFrQjZMLFFBQ3BCN0wsRUFBRSx1QkFBdUI2TCxRQUN6QjdMLEVBQUUsc0JBQXNCNkwsUUFDeEI3TCxFQUFFLGVBQWVXLFNBQVMsUUFDMUJYLEVBQUUsUUFBUTZMLFFBQ1Y3TCxFQUFFLGdCQUFnQlcsU0FBUyxRQUMzQlgsRUFBRSxlQUFlcUQsU0FHbkIsU0FBU2EsRUFBWTRILEVBQVFpQixHQUMzQixJQUFJaEIsRUFBUS9MLEVBQUUsWUFDTyxJQUFqQitMLEVBQU1yTCxTQUNScUwsRUFBUS9MLEVBQUUsMkJBRVorTCxFQUFNaUIsT0FBTyxPQUFTbEIsRUFBUyxTQUMvQjlMLEVBQUUsSUFBTStNLEdBQVF2RixLQUFLdUUsR0FHdkIsU0FBU3pILEVBQWdCMkksR0FDdkIsSUFBTWhCLEVBQVNqTSxFQUFFLElBQU1pTixHQUNqQmQsRUFBVW5NLEVBQUUsK0RBQ2xCaU0sRUFBT0MsTUFBTUMsSUFya0RmIiwiZmlsZSI6InNjcmlwdHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKGZ1bmN0aW9uKCkge1xuXG4gIHZhciBtZWRpYUVsZSA9IG51bGw7XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemUgZm91bmRhdGlvblxuICAgKi9cbiAgJChkb2N1bWVudCkuZm91bmRhdGlvbigpO1xuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIHNsaWRlclxuICAgKi9cbiAgLy8gJCgnLnNjcmVlblRleHQnKS5zbGljayh7XG4gIC8vICAgZG90czogdHJ1ZSxcbiAgLy8gICBpbmZpbml0ZTogdHJ1ZSxcbiAgLy8gICBzcGVlZDogNTAwLFxuICAvLyAgIGZhZGU6IHRydWUsXG4gIC8vICAgY3NzRWFzZTogJ2xpbmVhcidcbiAgLy8gfSk7XG5cbiAgJCgnLmhvbWVTbGlkZScpLnNsaWNrKHtcbiAgICBzbGlkZXNUb1Nob3c6IDEsXG4gICAgc2xpZGVzVG9TY3JvbGw6IDEsXG4gICAgYXV0b3BsYXk6IHRydWUsXG4gICAgYXV0b3BsYXlTcGVlZDogMjAwMCxcbiAgICBpbmZpbml0ZTogdHJ1ZSxcbiAgICBkb3RzOiB0cnVlXG4gIH0pO1xuXG4gIC8qKlxuICAgKiBJbml0aWFsaXplIGF1ZGlvIHBsYXllclxuICAgKi9cbiAgaWYgKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5pbmRleE9mKCdwbGF5JykpIHtcbiAgICAkKCcjYXVkaW9QbGF5ZXInKS5tZWRpYWVsZW1lbnRwbGF5ZXIoe1xuICAgICAgc3RyZXRjaGluZzogJ3Jlc3BvbnNpdmUnLFxuICAgICAgcGx1Z2luUGF0aDogJy4uL2pzL2xpYi9idWlsZC8nLFxuICAgICAgLy8gV2hlbiB1c2luZyBqUXVlcnkncyBgbWVkaWFlbGVtZW50cGxheWVyYCwgYW4gYGluc3RhbmNlYCBhcmd1bWVudFxuICAgICAgLy8gaXMgYXZhaWxhYmxlIGluIHRoZSBgc3VjY2Vzc2AgY2FsbGJhY2tcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKG1lZGlhRWxlbWVudCwgb3JpZ2luYWxOb2RlLCBpbnN0YW5jZSkge1xuICAgICAgICBtZWRpYUVsZSA9IG1lZGlhRWxlbWVudDtcbiAgICAgICAgaGlnaExpZ2h0UHJldk5leHQoKTtcblxuICAgICAgICBtZWRpYUVsZS5wbGF5KCk7XG5cbiAgICAgICAgJChtZWRpYUVsZSkub24oJ3BsYXlpbmcnLCAoKSA9PiB7XG4gICAgICAgICAgY29uc3QgdHJhY2tJZCA9ICQoJ2xpLnRyYWNrTGlzdC5oaWdobGlnaHQnKS5hdHRyKCdpZCcpO1xuICAgICAgICAgIHVwZGF0ZU5vT2ZQbGF5cyh0cmFja0lkKTtcbiAgICAgICAgICAkKG1lZGlhRWxlKS5vZmYoJ3BsYXlpbmcnKTtcblxuICAgICAgICB9KTtcbiAgICAgICAgJChtZWRpYUVsZW1lbnQpLm9uKCdlbmRlZCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgIGlmICgkKCcjdHJhY2tTaHVmZmxlJykuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgICBjb25zdCBsaUNvdW50ID0gJCgnbGkudHJhY2tMaXN0JykubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3QgcmFuZG9tID0gTWF0aC5mbG9vcigoTWF0aC5yYW5kb20oKSAqIGxpQ291bnQpICsgMSk7XG4gICAgICAgICAgICB2YXIgbGlFbGUgPSAkKCdsaS50cmFja0xpc3Q6bnRoLWNoaWxkKCcgKyByYW5kb20gKyAnKScpO1xuXG5cbiAgICAgICAgICAgIGlmIChsaUVsZS5oYXNDbGFzcygnaGlnaGxpZ2h0JykpIHtcbiAgICAgICAgICAgICAgbGlFbGUgPSBsaUVsZS5uZXh0KCk7XG4gICAgICAgICAgICAgIGlmIChsaUVsZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICBsaUVsZSA9ICQoJ2xpLnRyYWNrTGlzdDpudGgtY2hpbGQoMSknKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsaUVsZS5jbGljaygpO1xuXG4gICAgICAgICAgICAvL3VwZGF0ZSBwbGF5IGNvdW50XG4gICAgICAgICAgICAvLyBjb25zdCB0cmFja0lkID0gJCgnbGkudHJhY2tMaXN0LmhpZ2hsaWdodCcpLmF0dHIoJ2lkJyk7XG4gICAgICAgICAgICAvLyB1cGRhdGVOb09mUGxheXModHJhY2tJZCk7XG5cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFyIGxpRWxlID0gJCgnbGkudHJhY2tMaXN0LmhpZ2hsaWdodCcpLm5leHQoKTtcblxuICAgICAgICAgICAgaWYgKCQoJyN0cmFja1JlcGVhdCcpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgICAgICAgICAgICBtZWRpYUVsZW1lbnQucGxheSgpO1xuICAgICAgICAgICAgICAvL3VwZGF0ZSBwbGF5IGNvdW50XG4gICAgICAgICAgICAgIGNvbnN0IHRyYWNrSWQgPSAkKCdsaS50cmFja0xpc3QuaGlnaGxpZ2h0JykuYXR0cignaWQnKTtcbiAgICAgICAgICAgICAgdXBkYXRlTm9PZlBsYXlzKHRyYWNrSWQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWYgKGxpRWxlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGNhbGxGb2N1cygkKCdsaS50cmFja0xpc3QnKS5maXJzdCgpKTtcbiAgICAgICAgICAgICAgICBoaWdoTGlnaHRQcmV2TmV4dCgpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxpRWxlLmNsaWNrKCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICAgIGVycm9yOiBmdW5jdGlvbihtZWRpYUVsZW1lbnQsIG9yaWdpbmFsTm9kZSkge1xuICAgICAgICBhbGVydCgnVGhlcmUgaXMgc29tZSBlcnJvciBhdCB0aGUgc2VydmVyIHBsYXlpbmcgdGhlIHRyYWNrIScpO1xuICAgICAgfVxuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gdXBkYXRlTm9PZlBsYXlzKHRyYWNrSWQpIHtcbiAgICAkLnBvc3QoYC91cGRhdGUvcGxheUNvdW50LyR7dHJhY2tJZH1gKVxuICAgICAgLmZhaWwoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgIH0pXG4gICAgICAuZG9uZShmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXG4gICAgICB9KTtcblxuICB9XG5cbiAgZnVuY3Rpb24gc2h1ZmZsZVRyYWNrcyhlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGlmICghJCh0aGlzKS5oYXNDbGFzcygnaW5hY3RpdmUnKSkge1xuICAgICAgJCh0aGlzKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcGxheVByZXZpb3VzKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgaWYgKCEkKHRoaXMpLmhhc0NsYXNzKCdpbmFjdGl2ZScpKSB7XG4gICAgICB2YXIgbGlFbGUgPSAkKCdsaS50cmFja0xpc3QuaGlnaGxpZ2h0JykucHJldigpO1xuICAgICAgbGlFbGUuY2xpY2soKTtcbiAgICAgIGhpZ2hMaWdodFByZXZOZXh0KCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gcGxheU5leHQoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBpZiAoISQodGhpcykuaGFzQ2xhc3MoJ2luYWN0aXZlJykpIHtcbiAgICAgIHZhciBsaUVsZSA9ICQoJ2xpLnRyYWNrTGlzdC5oaWdobGlnaHQnKS5uZXh0KCk7XG4gICAgICBsaUVsZS5jbGljaygpO1xuICAgICAgaGlnaExpZ2h0UHJldk5leHQoKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBoaWdoTGlnaHRQcmV2TmV4dCgpIHtcbiAgICBpZiAoJCgnbGkudHJhY2tMaXN0LmhpZ2hsaWdodCcpLnByZXYoKS5sZW5ndGggPT09IDApIHtcbiAgICAgICQoJyN0cmFja1ByZXYnKS5hZGRDbGFzcygnaW5hY3RpdmUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJCgnI3RyYWNrUHJldicpLnJlbW92ZUNsYXNzKCdpbmFjdGl2ZScpO1xuICAgIH1cbiAgICBpZiAoJCgnbGkudHJhY2tMaXN0LmhpZ2hsaWdodCcpLm5leHQoKS5sZW5ndGggPT09IDApIHtcbiAgICAgICQoJyN0cmFja05leHQnKS5hZGRDbGFzcygnaW5hY3RpdmUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJCgnI3RyYWNrTmV4dCcpLnJlbW92ZUNsYXNzKCdpbmFjdGl2ZScpO1xuICAgIH1cblxuICAgICQoJyN0cmFja1NodWZmbGUnKS5yZW1vdmVDbGFzcygnaW5hY3RpdmUnKTtcbiAgICAkKCcjdHJhY2tMaWtlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICQoJyN0cmFja0Rpc2xpa2UnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG5cbiAgICBpZiAoJCgnbGkudHJhY2tMaXN0LmhpZ2hsaWdodCcpLnByZXYoKS5sZW5ndGggPT09IDAgJiYgJCgnbGkudHJhY2tMaXN0LmhpZ2hsaWdodCcpLm5leHQoKS5sZW5ndGggPT09IDApIHtcbiAgICAgICQoJyN0cmFja1NodWZmbGUnKS5hZGRDbGFzcygnaW5hY3RpdmUnKTtcbiAgICB9XG5cbiAgICBpZiAoJCgnbGkudHJhY2tMaXN0LmhpZ2hsaWdodCcpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgJCgnI3RyYWNrUGxheWxpc3QnKS5hZGRDbGFzcygnaW5hY3RpdmUnKTtcbiAgICAgICQoJyN0cmFja0xpa2UnKS5hZGRDbGFzcygnaW5hY3RpdmUnKTtcbiAgICAgICQoJyN0cmFja0Rpc2xpa2UnKS5hZGRDbGFzcygnaW5hY3RpdmUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJCgnI3RyYWNrUGxheWxpc3QnKS5yZW1vdmVDbGFzcygnaW5hY3RpdmUnKTtcbiAgICAgICQoJyN0cmFja0xpa2UnKS5yZW1vdmVDbGFzcygnaW5hY3RpdmUnKTtcbiAgICAgICQoJyN0cmFja0Rpc2xpa2UnKS5yZW1vdmVDbGFzcygnaW5hY3RpdmUnKTtcbiAgICB9XG5cbiAgICBjb25zdCBsaWtlID0gJCgnbGkudHJhY2tMaXN0LmhpZ2hsaWdodCcpLmF0dHIoJ2RhdGEtbGlrZScpO1xuICAgIGNvbnN0IGRpc2xpa2UgPSAkKCdsaS50cmFja0xpc3QuaGlnaGxpZ2h0JykuYXR0cignZGF0YS1kaXNsaWtlJyk7XG5cbiAgICBpZiAobGlrZSA9PSAndHJ1ZScpIHtcbiAgICAgICQoJyN0cmFja0xpa2UnKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgfVxuICAgIGlmIChkaXNsaWtlID09ICd0cnVlJykge1xuICAgICAgJCgnI3RyYWNrRGlzbGlrZScpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjYWxsRm9jdXMobGlFbGUpIHtcbiAgICAkKCcudHJhY2tMaXN0JykucmVtb3ZlQ2xhc3MoJ2hpZ2hsaWdodCcpO1xuICAgICQoJy50cmFja0l0ZW0nKS5yZW1vdmVDbGFzcygnZmktc291bmQnKTtcbiAgICBsaUVsZS5hZGRDbGFzcygnaGlnaGxpZ2h0Jyk7XG4gICAgbGlFbGUuZmluZCgnLnRyYWNrSXRlbScpLmFkZENsYXNzKCdmaS1zb3VuZCcpO1xuICAgIGNvbnN0IHRyYWNrU3JjID0gbGlFbGUuZGF0YSgndHJhY2stc3JjJyk7XG4gICAgLy8gY29uc3Qgc3RyID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lO1xuICAgIC8vIGNvbnN0IHBhdGggPSBzdHIuc3Vic3RyKDAsIHN0ci5sYXN0SW5kZXhPZihcIi9cIikgKyAxKTtcbiAgICAvLyBjb25zdCB0cmFja0lkID0gbGlFbGUuYXR0cignaWQnKTtcbiAgICBtZWRpYUVsZS5zZXRTcmModHJhY2tTcmMpO1xuICAgIG1lZGlhRWxlLmxvYWQoKTtcbiAgICAvL2hpc3RvcnkucHVzaFN0YXRlKHRyYWNrSWQsICcnLCBwYXRoICsgdHJhY2tJZCk7XG4gICAgJChtZWRpYUVsZSkub24oJ3BsYXlpbmcnLCAoKSA9PiB7XG4gICAgICAvL3VwZGF0ZSBwbGF5IGNvdW50XG4gICAgICBjb25zdCB0cmFja0lkID0gbGlFbGUuYXR0cignaWQnKTtcbiAgICAgIHVwZGF0ZU5vT2ZQbGF5cyh0cmFja0lkKTtcbiAgICAgICQobWVkaWFFbGUpLm9mZigncGxheWluZycpO1xuICAgIH0pXG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVVc2VyTGlrZShlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIGNvbnN0IGxpa2UgPSAkKHRoaXMpLmhhc0NsYXNzKCdhY3RpdmUnKTtcbiAgICB2YXIgZGlzbGlrZSA9ICcnO1xuICAgIGNvbnN0IHRyYWNrSWQgPSAkKCdsaS50cmFja0xpc3QuaGlnaGxpZ2h0JykuYXR0cignaWQnKTtcblxuICAgICQoJ2xpLnRyYWNrTGlzdC5oaWdobGlnaHQnKS5hdHRyKCdkYXRhLWxpa2UnLCBsaWtlKTtcbiAgICBpZiAobGlrZSkge1xuICAgICAgaWYgKCQoJyN0cmFja0Rpc2xpa2UnKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcbiAgICAgICAgJCgnI3RyYWNrRGlzbGlrZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgZGlzbGlrZSA9ICdmYWxzZSc7XG4gICAgICAgICQoJ2xpLnRyYWNrTGlzdC5oaWdobGlnaHQnKS5hdHRyKCdkYXRhLWRpc2xpa2UnLCBkaXNsaWtlKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAkLnBvc3QoJy91c2VyL2xpa2VVbmxpa2UnLCB7XG4gICAgICAgIGxpa2U6IGxpa2UsXG4gICAgICAgIHRyYWNrSWQ6IHRyYWNrSWQsXG4gICAgICAgIGRpc2xpa2U6IGRpc2xpa2VcbiAgICAgIH0pLmZhaWwoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgIH0pXG4gICAgICAuZG9uZShmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpXG4gICAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZVVzZXJEaXNsaWtlKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgJCh0aGlzKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG4gICAgY29uc3QgZGlzbGlrZSA9ICQodGhpcykuaGFzQ2xhc3MoJ2FjdGl2ZScpO1xuICAgIHZhciBsaWtlID0gJyc7XG4gICAgY29uc3QgdHJhY2tJZCA9ICQoJ2xpLnRyYWNrTGlzdC5oaWdobGlnaHQnKS5hdHRyKCdpZCcpO1xuXG4gICAgJCgnbGkudHJhY2tMaXN0LmhpZ2hsaWdodCcpLmF0dHIoJ2RhdGEtZGlzbGlrZScsIGRpc2xpa2UpO1xuICAgIGlmIChkaXNsaWtlKSB7XG4gICAgICBpZiAoJCgnI3RyYWNrTGlrZScpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgICAgICAkKCcjdHJhY2tMaWtlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICBsaWtlID0gJ2ZhbHNlJztcbiAgICAgICAgJCgnbGkudHJhY2tMaXN0LmhpZ2hsaWdodCcpLmF0dHIoJ2RhdGEtbGlrZScsIGxpa2UpO1xuICAgICAgfVxuICAgIH1cblxuICAgICQucG9zdCgnL3VzZXIvZGlzbGlrZVVuZGlzbGlrZScsIHtcbiAgICAgICAgbGlrZTogbGlrZSxcbiAgICAgICAgdHJhY2tJZDogdHJhY2tJZCxcbiAgICAgICAgZGlzbGlrZTogZGlzbGlrZVxuICAgICAgfSkuZmFpbChmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgfSlcbiAgICAgIC5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgY29uc29sZS5sb2coZGF0YSlcbiAgICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlZ2lzdGVyIGZ1bmN0aW9uc1xuICAgKi9cbiAgJCh3aW5kb3cpLm9uKCdsb2FkIHJlc2l6ZScsIGhhbmRsZUxvYWQpO1xuICAkKGRvY3VtZW50KS5vbignY2xpY2snLCBjbG9zZU1lbnVzKTsgLyogY2xvc2UgYWxsIG1lbnVzICovXG4gICQoJyNsb2dpbicpLm9uKCdzdWJtaXQnLCBoYW5kbGVMb2dpbik7IC8qIG9uIGxvZ2luICovXG4gICQoJyNlZGl0UHJvZmlsZScpLm9uKCdzdWJtaXQnLCBoYW5kbGVVcGRhdGVQcm9maWxlKTsgLyogdXBkYXRlIHByb2ZpbGUgKi9cbiAgJCgnI2NvbmZpcm1Vc2VyJykub24oJ3N1Ym1pdCcsIGhhbmRsZVZlcmlmeVVzZXIpOyAvKiB2ZXJpZnkgdXNlciAqL1xuICAkKCcjZm9yZ290UGFzc3dvcmQnKS5vbignc3VibWl0JywgaGFuZGxlVXBkYXRlUGFzc3dvcmQpOyAvKiBwb3N0IHVwZGF0ZSBwYXNzd29yZCAqL1xuICAkKCcjc2lnbnVwJykub24oJ3N1Ym1pdCcsIGhhbmRsZVNpZ25VcCk7IC8qIFNpZ24gdXAgKi9cbiAgJCgnI3Jlc2V0Jykub24oJ2NsaWNrJywgY2xlYXJNZXNzYWdlKTsgLyogQ2xlYXIgbWVzc2FnZXMgb24gY2xpY2sgb2YgcmVzZXQgKi9cbiAgJCgnI2NoYW5nZVBhc3N3b3JkJykub24oJ3N1Ym1pdCcsIGhhbmRsZUNoYW5nZVBhc3N3b3JkKTsgLyogcG9zdCBjaGFuZ2UgcGFzc3dvcmQgKi9cbiAgJCgnI3NlYXJjaEljb24nKS5vbignY2xpY2snLCBkaXNwbGF5U2VhcmNoQmFyKTtcbiAgJCgnLmpzLXNlYXJjaC1jbG9zZScpLm9uKCdjbGljaycsIGhpZGVTZWFyY2hCYXIpO1xuICAkKCcubWVudURpdicpLm9uKCdjbGljaycsIHNob3dVc2VyTWVudUQpO1xuICAkKCcudHJhY2tMaXN0Jykub24oJ2NsaWNrJywgY2hhbmdlVHJhY2spOyAvKiBjaGFuZ2UgdHJhY2sgb24gY2xpY2sgKi9cbiAgJCgnI3NlYXJjaC10ZXh0Jykub24oJ2tleXVwJywgY2FsbFNlYXJjaCk7IC8qIHNlYXJjaCBmdW5jdGlvbmFsaXR5ICovXG4gICQoJy5qcy1zZWFyY2gtaWNvbicpLm9uKCdjbGljaycsIHNlYXJjaCk7IC8qIHNlYXJjaCBmdW5jdGlvbmFsaXR5ICovXG4gICQoJyN0cmFja1JlcGVhdCcpLm9uKCdjbGljaycsIGxpbmtBY3RpdmUpO1xuICAkKCcjdHJhY2tMaWtlJykub24oJ2NsaWNrJywgaGFuZGxlVXNlckxpa2UpOyAvKiBzZW5kIGxpa2UgdG8gc2VydmVyICovXG4gICQoJyN0cmFja0Rpc2xpa2UnKS5vbignY2xpY2snLCBoYW5kbGVVc2VyRGlzbGlrZSk7IC8qIHNlbmQgZGlzbGlrZSB0byBzZXJ2ZXIgKi9cbiAgJCgnI3RyYWNrUHJldicpLm9uKCdjbGljaycsIHBsYXlQcmV2aW91cyk7IC8qIHBsYXkgcHJldmlvdXMgdHJhY2sgKi9cbiAgJCgnI3RyYWNrTmV4dCcpLm9uKCdjbGljaycsIHBsYXlOZXh0KTsgLyogcGxheSBuZXh0IHRyYWNrICovXG4gICQoJyN0cmFja1NodWZmbGUnKS5vbignY2xpY2snLCBzaHVmZmxlVHJhY2tzKTsgLyogc2h1ZmZsZSB0cmFja3MqL1xuICAkKCcuZGVsZXRlLXRyYWNrJykub24oJ2NsaWNrJywgb3BlbkRlbGV0ZU1lbnUpOyAvKiBvcGVuIGRlbGV0ZSBtZW51ICovXG4gICQoJy5kZWxldGVNZW51Jykub24oJ2NsaWNrJywgZGVsZXRlVHJhY2spOyAvKiBkZWxldGUgdHJhY2sgKi9cbiAgJCgnLmVkaXRQbGF5bGlzdCcpLm9uKCdjbGljaycsIGFsbG93RHJhZ0Ryb3ApOyAvKnJlYXJyYW5nZSBwbGF5bGlzdCB0cmFja3MqL1xuICAkKCcjY29uY2VydC10ZXh0Jykub24oJ2tleXVwJywgY2FsbENvbmNlcnRTZWFyY2gpOyAvKiBjb25jZXJ0IHNlYXJjaCBmdW5jdGlvbmFsaXR5ICovXG4gICQoJy5qcy1jb25jZXJ0LXNlYXJjaCcpLm9uKCdjbGljaycsIHNlYXJjaENvbmNlcnQpIC8qIGNvbmNlcnQgc2VhcmNoIGZ1bmN0aW9uYWxpdHkgKi9cbiAgJCgnI3N0YXQtdGV4dCcpLm9uKCdrZXl1cCcsIGNhbGxTdGF0U2VhcmNoKTsgLyogc3RhdCBzZWFyY2ggZnVuY3Rpb25hbGl0eSAqL1xuICAkKCcuanMtc3RhdC1zZWFyY2gnKS5vbignY2xpY2snLCBzZWFyY2hTdGF0KSAvKiBzdGF0IHNlYXJjaCBmdW5jdGlvbmFsaXR5ICovXG4gICQoJyNwYXknKS5vbignc3VibWl0JywgaGFuZGxlUGF5bWVudCk7IC8qIFBheW1lbnQgKi9cblxuXG4gICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuc2VhcmNoSG9tZScsIHNlYXJjaCk7IC8qIHNlYXJjaCBmdW5jdGlvbmFsaXR5ICovXG5cbiAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5zdGF0LWFsYnVtcyBsaSBhJywgZ2V0U3RhdHMpOyAvKiBnZXQgc3RhdCByZXN1bHRzICovXG4gICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICd1bC5qcy1hcnRpc3RzIGxpIGEnLCBnZXRDb25jZXJ0c09mQXJ0aXN0KTsgLyogR2V0IGNvbmNlcnRzIG9mIGFydGlzdCAqL1xuXG4gICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICd1bC5qcy1sb2NhdGlvbnMgbGkgYScsIGdldENvbmNlcnRzT2ZMb2NhdGlvbik7IC8qIEdldCBjb25jZXJ0cyBvZiBsb2NhdGlvbiAqL1xuXG4gICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcucGxheUxpc3RDcmVhdGUnLCBvcGVuUGxheWxpc3QpOyAvKiBDcmVhdGUgcGxheWxpc3QgcG9wdXAgKi9cbiAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5jbG9zZWJ1dHRvbicsIGNsb3NlQ3JlYXRlUGxheWxpc3QpOyAvKiBjbG9zZSBDcmVhdGUgcGxheWxpc3QgcG9wdXAgKi9cbiAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNjYW5jZWxCdG4nLCBjbG9zZUNyZWF0ZVBsYXlsaXN0KTsgLyogY2xvc2UgQ3JlYXRlIHBsYXlsaXN0IHBvcHVwICovXG4gICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjY3JlYXRlQnRuJywgY3JlYXRlUGxheWxpc3QpOyAvKiBjcmVhdGUgcGxheWxpc3QgKi9cbiAgJChkb2N1bWVudCkub24oJ2tleXVwJywgJyNwbGF5bGlzdE5hbWUnLCBjcmVhdGVQbGF5bGlzdE9uRW50ZXIpOyAvKiBjcmVhdGUgcGxheWxpc3QgKi9cblxuICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnBsYXlsaXN0SG9tZSBhJywgcGxheVBsYXlsaXN0KTtcbiAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyNjYW5jZWxEZWxldGVCdG4nLCBjbG9zZURlbGV0ZVBsYXlsaXN0KTsgLyogY2xvc2UgRGVsZXRlIHBsYXlsaXN0IHBvcHVwICovXG4gICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuY2xvc2VEZWxldGUnLCBjbG9zZURlbGV0ZVBsYXlsaXN0KTsgLyogY2xvc2UgRGVsZXRlIHBsYXlsaXN0IHBvcHVwICovXG4gICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuZGVsZXRlUGxheWxpc3QnLCBvcGVuRGVsZXRlUGxheWxpc3RQb3B1cCk7IC8qIG9wZW4gZGVsZXRlIHBsYXlsaXN0IHBvcHVwICovXG4gICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjZGVsZXRlQnRuJywgZGVsZXRlUGxheWxpc3QpOyAvKiBEZWxldGUgcGxheWxpc3QgKi9cbiAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5wbGF5bGlzdC1tYW5hZ2UnLCBvcGVuUGxheWxpc3RNZW51KTsgLyogb3BlbiBwbGF5bGlzdCBtZW51ICovXG4gICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuZWRpdFBsYXlsaXN0TmFtZScsIG9wZW5FZGl0UGxheWxpc3RQb3B1cCk7IC8qIG9wZW4gZWRpdCBwbGF5bGlzdCBwb3B1cCAqL1xuICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI2NhbmNlbEVkaXRCdG4nLCBjbG9zZUVkaXRQbGF5bGlzdFBvcHVwKTsgLyogY2xvc2UgZWRpdCBwbGF5bGlzdCBwb3B1cCAqL1xuICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmNsb3NlRWRpdCcsIGNsb3NlRWRpdFBsYXlsaXN0UG9wdXApOyAvKiBjbG9zZSBlZGl0IHBsYXlsaXN0IHBvcHVwICovXG4gICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcjZWRpdEJ0bicsIGVkaXRQbGF5bGlzdE5hbWUpOyAvKiBlZGl0IHBsYXlsaXN0IG5hbWUgKi9cbiAgJChkb2N1bWVudCkub24oJ2tleXVwJywgJyNlZGl0cGxheWxpc3ROYW1lJywgZWRpdFBsYXlsaXN0TmFtZU9uRW50ZXIpOyAvKiBlZGl0IHBsYXlsaXN0IG5hbWUgKi9cblxuICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnNlZUFsbFBsYXlsaXN0cycsIHNlZUFsbFBsYXlsaXN0cyk7IC8qIHNlZSBhbGwgcGxheWxpc3RzICovXG5cbiAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJyN0cmFja1BsYXlsaXN0Jywgb3BlbkFkZFRvUGxheWxpc3QpOyAvKiBvcGVuIGFkZCB0byBwbGF5bGlzdCAqL1xuICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmNsb3NlQWRkVG9QbGF5bGlzdCcsIGNsb3NlQWRkVG9QbGF5bGlzdCk7IC8qIGNsb3NlIGFkZCB0byBwbGF5bGlzdCAqL1xuICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLnBsYXlsaXN0X2FkZCcsIGFkZFRvUGxheWxpc3QpOyAvKiBhZGQgdG8gcGxheWxpc3QgKi9cbiAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5hZGRUb19wbGF5bGlzdCBhJywgZG9Ob3RoaW5nKTtcblxuICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLm1lbnVNb2RlJywgc2hvd1VzZXJNZW51KTtcbiAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5jbG9zZS1pY29uJywgaGlkZVVzZXJNZW51KTtcbiAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5zZWVBbGxSJywgc2VlQWxsUmVzdWx0cyk7IC8qIHNlZSBhbGwgdGhlIGNhdGVnb3JpZXMgb2Ygc2VhcmNoIHJlc3VsdHMgKi9cblxuICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmhvbWVUYWJzTGlzdCBsaSBhLmpzLXN1cCcsIGhhbmRsZUhvbWVUYWJzQ2xpY2spOyAvKiB0YWJzIG9uIHVzZXIgaG9tZXBhZ2UgY2xpY2sgKi9cblxuICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmpzLWNob29zZWFydGlzdCcsIHRvZ2dsZUFydGlzdHMpOyAvKiB0b2dnbGUgYXJ0aXN0cyBmb3IgY29uY2VydHMgKi9cbiAgJChkb2N1bWVudCkub24oJ2NsaWNrJywgJy5qcy1jaG9vc2VMb2NhdGlvbicsIHRvZ2dsZUxvY2F0aW9ucyk7IC8qIHRvZ2dsZSBsb2NhdGlvbnMgZm9yIGNvbmNlcnRzICovXG5cblxuXG5cbiAgdmFyIHVzZXIgPSBudWxsO1xuXG5cbiAgLyogZnVuY3Rpb25zICovXG5cbiAgZnVuY3Rpb24gY2xvc2VNZW51cyhlKSB7XG4gICAgaWYgKCQoZS50YXJnZXQpLmNsb3Nlc3QoJy51c2VyTWVudScpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgJCgnI3VzZXItbWVudScpLnJlbW92ZUNsYXNzKCdzaG93Jyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlTG9hZCgpIHtcbiAgICBjb25zdCBmb290ZXIgPSAkKCcjZm9vdGVyJyk7XG4gICAgaWYgKCQoJy50aXRsZS1iYXInKS5pcygnOnZpc2libGUnKSkge1xuICAgICAgJCgnI2luZGV4LW1lbnUnKS5yZW1vdmVDbGFzcygnYWRkRmxvYXQnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJCgnI2luZGV4LW1lbnUnKS5hZGRDbGFzcygnYWRkRmxvYXQnKTtcbiAgICB9XG4gICAgdmFyIHdpZHRoID0gJCh3aW5kb3cpLndpZHRoKCk7XG4gICAgaWYgKHdpZHRoIDwgNDAwKSB7XG4gICAgICAkKCcubWVudURpdicpLmFkZENsYXNzKCdtZW51TW9kZScpO1xuICAgICAgJCgnI3VzZXItbWVudScpLmFkZENsYXNzKCdtZW51TW9kJyk7XG4gICAgICAkKCcjdXNlci1tZW51JykucmVtb3ZlQ2xhc3MoJ3Nob3cnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgJCgnI3VzZXItbWVudScpLnJlbW92ZUNsYXNzKCdzaG93Jyk7XG4gICAgICAkKCcjdXNlci1tZW51JykuY3NzKCd3aWR0aCcsICcxODBweCcpO1xuICAgICAgJCgnLmNsb3NlLWljb24nKS5yZW1vdmUoKTtcbiAgICAgICQoJy5tZW51RGl2JykucmVtb3ZlQ2xhc3MoJ21lbnVNb2RlJyk7XG4gICAgICAkKCcjdXNlci1tZW51JykucmVtb3ZlQ2xhc3MoJ21lbnVNb2QnKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBkb05vdGhpbmcoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZUxvZ2luKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY2xlYXJNZXNzYWdlKCk7XG4gICAgY29uc3QgbmFtZSA9ICQudHJpbSgkKCcjdXNlck5hbWUnKS52YWwoKSk7XG4gICAgY29uc3QgcHdkID0gJC50cmltKCQoJyN1c2VyUGFzc3dvcmQnKS52YWwoKSk7XG5cbiAgICBpZiAobmFtZS5sZW5ndGggIT09IDAgJiYgcHdkLmxlbmd0aCAhPT0gMCkge1xuICAgICAgY29uc3QgdXNlck5hbWVSZWdleCA9IC9eW2EtekEtWjAtOS5fXXsxLDMwfSQvO1xuICAgICAgY29uc3QgbmFtZVZlcmlmaWVzID0gdXNlck5hbWVSZWdleC50ZXN0KG5hbWUpO1xuXG4gICAgICBpZiAobmFtZVZlcmlmaWVzKSB7XG4gICAgICAgICQucG9zdCgnL2xvZ2luJywge1xuICAgICAgICAgICAgdXNlcm5hbWU6IG5hbWUsXG4gICAgICAgICAgICBwYXNzd29yZDogcHdkXG4gICAgICAgICAgfSlcbiAgICAgICAgICAuZmFpbChmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZVRleHQgPSBkYXRhLnJlc3BvbnNlSlNPTjtcbiAgICAgICAgICAgIGlmIChkYXRhLnN0YXR1cyA9PT0gNDAwKSB7XG4gICAgICAgICAgICAgIHNob3dNZXNzYWdlKHJlc3BvbnNlVGV4dFswXS5tc2csICdlcnJvcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGRhdGEuc3RhdHVzID09PSA0MDEpIHtcbiAgICAgICAgICAgICAgc2hvd01lc3NhZ2UocmVzcG9uc2VUZXh0Lm1zZywgJ2Vycm9yJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSlcbiAgICAgICAgICAuZG9uZShmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvdXNlci9ob21lJztcbiAgICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNob3dFcnJvckNpcmNsZSgndXNlck5hbWUnKTtcbiAgICAgICAgc2hvd01lc3NhZ2UoJ1VzZXJuYW1lcyBjYW4gb25seSB1c2UgbGV0dGVycywgbnVtYmVycywgdW5kZXJzY29yZXMgYW5kIHBlcmlvZHMuJywgJ2Vycm9yJyk7XG5cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuXG4gICAgICBpZiAobmFtZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgc2hvd0Vycm9yQ2lyY2xlKCd1c2VyTmFtZScpO1xuICAgICAgICAkKCcjZW1wdHlGaWVsZHMnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgfVxuICAgICAgaWYgKHB3ZC5sZW5ndGggPT0gMCkge1xuICAgICAgICBzaG93RXJyb3JDaXJjbGUoJ3VzZXJQYXNzd29yZCcpO1xuICAgICAgICAkKCcjZW1wdHlGaWVsZHMnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZVVwZGF0ZVByb2ZpbGUoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIGNsZWFyTWVzc2FnZSgpO1xuXG4gICAgY29uc3QgdXNlcm5hbWUgPSAkLnRyaW0oJCgnI3VzZXJOYW1lJykudmFsKCkpO1xuICAgIGNvbnN0IGVtYWlsID0gJC50cmltKCQoJyNlbWFpbCcpLnZhbCgpKTtcblxuICAgIGlmICh1c2VybmFtZS5sZW5ndGggIT09IDAgJiYgZW1haWwubGVuZ3RoICE9PSAwKSB7XG5cbiAgICAgIGNvbnN0IHBhdHRlcm4gPSAvXlthLXpBLVowLTkuX117MSwzMH0kLztcbiAgICAgIGNvbnN0IG5hbWVWZXJpZmllcyA9IHBhdHRlcm4udGVzdCh1c2VybmFtZSk7XG4gICAgICBpZiAobmFtZVZlcmlmaWVzKSB7XG4gICAgICAgICQucG9zdCgnL3VzZXIvZWRpdFByb2ZpbGUnLCB7XG4gICAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWUsXG4gICAgICAgICAgICBlbWFpbDogZW1haWxcbiAgICAgICAgICB9KVxuICAgICAgICAgIC5mYWlsKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIGlmIChkYXRhLnN0YXR1cyA9PT0gNDAwKSB7XG4gICAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlVGV4dCA9IGRhdGEucmVzcG9uc2VKU09OO1xuICAgICAgICAgICAgICBpZiAocmVzcG9uc2VUZXh0Lmxlbmd0aCA+PSAxKSB7XG4gICAgICAgICAgICAgICAgc2hvd01lc3NhZ2UocmVzcG9uc2VUZXh0WzBdLm1zZywgJ2Vycm9yJyk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc2hvd01lc3NhZ2UocmVzcG9uc2VUZXh0Lm1zZywgJ2Vycm9yJyk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICAgIC5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgIHNob3dNZXNzYWdlKGRhdGEubXNnLCAnbXNnJyk7XG4gICAgICAgICAgICAkKCcjbG9naW5MaW5rJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgICAgICQoJy5idG5zJykuYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHNob3dFcnJvckNpcmNsZSgndXNlck5hbWUnKTtcbiAgICAgICAgc2hvd01lc3NhZ2UoJ1VzZXJuYW1lcyBjYW4gb25seSB1c2UgbGV0dGVycywgbnVtYmVycywgdW5kZXJzY29yZXMgYW5kIHBlcmlvZHMuJywgJ2Vycm9yJyk7XG5cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHVzZXJuYW1lLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBzaG93RXJyb3JDaXJjbGUoJ3VzZXJOYW1lJyk7XG4gICAgICAgICQoJyNlbXB0eUZpZWxkcycpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgICB9XG4gICAgICBpZiAoZW1haWwubGVuZ3RoID09IDApIHtcbiAgICAgICAgc2hvd0Vycm9yQ2lyY2xlKCdlbWFpbCcpO1xuICAgICAgICAkKCcjZW1wdHlGaWVsZHMnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGhhbmRsZVZlcmlmeVVzZXIoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIGNsZWFyTWVzc2FnZSgpO1xuXG4gICAgY29uc3QgdXNlcm5hbWUgPSAkKCcjdXNlcm5hbWUnKS52YWwoKTtcblxuICAgIGlmICh1c2VybmFtZS5sZW5ndGggIT09IDApIHtcblxuICAgICAgJC5wb3N0KCcvdmVyaWZ5VXNlcicsIHtcbiAgICAgICAgICB1c2VybmFtZTogdXNlcm5hbWVcbiAgICAgICAgfSlcbiAgICAgICAgLmZhaWwoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgIGlmIChkYXRhLnN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZVRleHQgPSBkYXRhLnJlc3BvbnNlSlNPTjtcbiAgICAgICAgICAgIHNob3dNZXNzYWdlKHJlc3BvbnNlVGV4dC5tc2csICdlcnJvcicpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLmRvbmUoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICQoJyN1c2VybmFtZScpLnZhbCgnJyk7XG4gICAgICAgICAgJCgnI2ZvcmdvdFBhc3N3b3JkJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgICAkKCcjY29uZmlybVVzZXInKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgICAgIHVzZXIgPSBkYXRhO1xuICAgICAgICB9KTtcblxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodXNlcm5hbWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHNob3dFcnJvckNpcmNsZSgndXNlcm5hbWUnKTtcbiAgICAgICAgJCgnI2VtcHR5RmllbGRzJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVVcGRhdGVQYXNzd29yZChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNsZWFyTWVzc2FnZSgpO1xuXG4gICAgY29uc3QgbmV3UHdkID0gJC50cmltKCQoJyNuZXdQYXNzd29yZCcpLnZhbCgpKTtcbiAgICBjb25zdCBjb25maXJtUHdkID0gJC50cmltKCQoJyNjb25maXJtUGFzc3dvcmQnKS52YWwoKSk7XG5cbiAgICBpZiAobmV3UHdkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgc2hvd0Vycm9yQ2lyY2xlKCduZXdQYXNzd29yZCcpO1xuICAgICAgJCgnI2VtcHR5RmllbGRzJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICB9XG5cbiAgICBpZiAoY29uZmlybVB3ZC5sZW5ndGggPT09IDApIHtcbiAgICAgIHNob3dFcnJvckNpcmNsZSgnY29uZmlybVBhc3N3b3JkJyk7XG4gICAgICAkKCcjZW1wdHlGaWVsZHMnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgIH1cblxuICAgIGlmIChuZXdQd2QubGVuZ3RoICE9PSAwICYmIGNvbmZpcm1Qd2QgIT09IG5ld1B3ZCkge1xuICAgICAgc2hvd0Vycm9yQ2lyY2xlKCdjb25maXJtUGFzc3dvcmQnKTtcbiAgICAgICQoJyNlbXB0eUZpZWxkcycpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgICBzaG93TWVzc2FnZSgnQ29uZmlybSBwYXNzd29yZCBkb2VzblxcJ3QgbWF0Y2ggd2l0aCB0aGUgbmV3IHBhc3N3b3JkJywgJ2Vycm9yJyk7XG4gICAgfVxuXG4gICAgaWYgKG5ld1B3ZC5sZW5ndGggIT09IDAgJiYgY29uZmlybVB3ZC5sZW5ndGggIT09IDAgJiYgbmV3UHdkID09PSBjb25maXJtUHdkKSB7XG4gICAgICAkLnBvc3QoJy9mb3Jnb3RQYXNzd29yZCcsIHtcbiAgICAgICAgICBuZXdQYXNzd29yZDogbmV3UHdkLFxuICAgICAgICAgIHVzZXI6IHVzZXJcbiAgICAgICAgfSlcbiAgICAgICAgLmZhaWwoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgIGlmIChkYXRhLnN0YXR1cyA9PT0gNDAwKSB7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZVRleHQgPSBkYXRhLnJlc3BvbnNlSlNPTjtcbiAgICAgICAgICAgIHNob3dNZXNzYWdlKHJlc3BvbnNlVGV4dC5tc2csICdlcnJvcicpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLmRvbmUoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgIHNob3dNZXNzYWdlKGRhdGEubXNnLCAnbXNnJyk7XG4gICAgICAgICAgJCgnLmJ0bnMnKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgICAgICQoJyNsb2dpbkxpbmsnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBoYW5kbGVDaGFuZ2VQYXNzd29yZChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNsZWFyTWVzc2FnZSgpO1xuXG4gICAgY29uc3Qgb2xkUHdkID0gJC50cmltKCQoJyNvbGRQYXNzd29yZCcpLnZhbCgpKTtcbiAgICBjb25zdCBuZXdQd2QgPSAkLnRyaW0oJCgnI25ld1Bhc3N3b3JkJykudmFsKCkpO1xuICAgIGNvbnN0IGNvbmZpcm1Qd2QgPSAkLnRyaW0oJCgnI2NvbmZpcm1QYXNzd29yZCcpLnZhbCgpKTtcblxuICAgIGlmIChvbGRQd2QubGVuZ3RoID09PSAwKSB7XG4gICAgICBzaG93RXJyb3JDaXJjbGUoJ29sZFBhc3N3b3JkJyk7XG4gICAgICAkKCcjZW1wdHlGaWVsZHMnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgIH1cblxuICAgIGlmIChuZXdQd2QubGVuZ3RoID09PSAwKSB7XG4gICAgICBzaG93RXJyb3JDaXJjbGUoJ25ld1Bhc3N3b3JkJyk7XG4gICAgICAkKCcjZW1wdHlGaWVsZHMnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgIH1cblxuICAgIGlmIChjb25maXJtUHdkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgc2hvd0Vycm9yQ2lyY2xlKCdjb25maXJtUGFzc3dvcmQnKTtcbiAgICAgICQoJyNlbXB0eUZpZWxkcycpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgfVxuXG4gICAgaWYgKG5ld1B3ZC5sZW5ndGggIT09IDAgJiYgY29uZmlybVB3ZC5sZW5ndGggIT09IDAgJiYgY29uZmlybVB3ZCAhPT0gbmV3UHdkKSB7XG4gICAgICBzaG93RXJyb3JDaXJjbGUoJ2NvbmZpcm1QYXNzd29yZCcpO1xuICAgICAgJCgnI2VtcHR5RmllbGRzJykuYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgICAgIHNob3dNZXNzYWdlKCdDb25maXJtIHBhc3N3b3JkIGRvZXNuXFwndCBtYXRjaCB3aXRoIHRoZSBuZXcgcGFzc3dvcmQnLCAnZXJyb3InKTtcbiAgICAgIGlmIChvbGRQd2QubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICQoJyNlbXB0eUZpZWxkcycpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG9sZFB3ZC5sZW5ndGggIT09IDAgJiYgbmV3UHdkLmxlbmd0aCAhPT0gMCAmJiBjb25maXJtUHdkLmxlbmd0aCAhPT0gMCAmJiBuZXdQd2QgPT09IGNvbmZpcm1Qd2QpIHtcbiAgICAgICQucG9zdCgnL3VzZXIvY2hhbmdlUGFzc3dvcmQnLCB7XG4gICAgICAgICAgb2xkUGFzc3dvcmQ6IG9sZFB3ZCxcbiAgICAgICAgICBuZXdQYXNzd29yZDogbmV3UHdkXG4gICAgICAgIH0pXG4gICAgICAgIC5mYWlsKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICBpZiAoZGF0YS5zdGF0dXMgPT09IDQwMCkge1xuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VUZXh0ID0gZGF0YS5yZXNwb25zZUpTT047XG4gICAgICAgICAgICBzaG93TWVzc2FnZShyZXNwb25zZVRleHQubXNnLCAnZXJyb3InKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIC5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICBzaG93TWVzc2FnZShkYXRhLm1zZywgJ21zZycpO1xuICAgICAgICAgICQoJy5idG5zJykuYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgICAkKCcjbG9naW5MaW5rJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG5cblxuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlU2lnblVwKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY2xlYXJNZXNzYWdlKCk7XG5cbiAgICBjb25zdCBuYW1lID0gJC50cmltKCQoXCIjdXNlck5hbWVcIikudmFsKCkpO1xuICAgIGNvbnN0IGVtYWlsID0gJC50cmltKCQoXCIjdXNlckVtYWlsXCIpLnZhbCgpKTtcbiAgICBjb25zdCBwd2QgPSAkLnRyaW0oJChcIiN1c2VyUGFzc3dvcmRcIikudmFsKCkpO1xuICAgIGNvbnN0IGNvbmZpcm1wd2QgPSAkLnRyaW0oJChcIiNjb25maXJtUGFzc3dvcmRcIikudmFsKCkpO1xuICAgIGNvbnN0IHVzZXJOYW1lUmVnZXggPSAvXlthLXpBLVowLTkuX117MSwzMH0kLztcbiAgICBjb25zdCBuYW1lVmVyaWZpZXMgPSB1c2VyTmFtZVJlZ2V4LnRlc3QobmFtZSk7XG5cblxuICAgIGlmIChuYW1lLmxlbmd0aCA9PT0gMCkge1xuICAgICAgc2hvd0Vycm9yQ2lyY2xlKCd1c2VyTmFtZScpO1xuICAgICAgJCgnI2VtcHR5RmllbGRzJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICB9XG5cbiAgICBpZiAoIW5hbWVWZXJpZmllcyAmJiBuYW1lLmxlbmd0aCAhPT0gMCkge1xuICAgICAgc2hvd0Vycm9yQ2lyY2xlKCd1c2VyTmFtZScpO1xuICAgICAgc2hvd01lc3NhZ2UoJ1VzZXJuYW1lcyBjYW4gb25seSB1c2UgbGV0dGVycywgbnVtYmVycywgdW5kZXJzY29yZXMgYW5kIHBlcmlvZHMuJywgJ2Vycm9yJyk7XG4gICAgfVxuXG4gICAgaWYgKGVtYWlsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgc2hvd0Vycm9yQ2lyY2xlKCd1c2VyRW1haWwnKTtcbiAgICAgICQoJyNlbXB0eUZpZWxkcycpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgfVxuXG4gICAgaWYgKHB3ZC5sZW5ndGggPT09IDApIHtcbiAgICAgIHNob3dFcnJvckNpcmNsZSgndXNlclBhc3N3b3JkJyk7XG4gICAgICAkKCcjZW1wdHlGaWVsZHMnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgIH1cblxuICAgIGlmIChjb25maXJtcHdkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgc2hvd0Vycm9yQ2lyY2xlKCdjb25maXJtUGFzc3dvcmQnKTtcbiAgICAgICQoJyNlbXB0eUZpZWxkcycpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgfVxuXG4gICAgaWYgKHB3ZC5sZW5ndGggIT09IDAgJiYgY29uZmlybXB3ZC5sZW5ndGggIT09IDAgJiYgY29uZmlybXB3ZCAhPT0gcHdkKSB7XG4gICAgICBzaG93RXJyb3JDaXJjbGUoJ2NvbmZpcm1QYXNzd29yZCcpO1xuICAgICAgJCgnI2VtcHR5RmllbGRzJykuYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgICAgIHNob3dNZXNzYWdlKCdDb25maXJtIHBhc3N3b3JkIGRvZXNuXFwndCBtYXRjaCB3aXRoIHBhc3N3b3JkJywgJ2Vycm9yJyk7XG4gICAgICBpZiAoZW1haWwubGVuZ3RoID09PSAwIHx8IG5hbWUubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICQoJyNlbXB0eUZpZWxkcycpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gY29uc3QgZXJyb3IgPSAnVXNlcm5hbWVzIGNhbiBvbmx5IHVzZSBsZXR0ZXJzLCBudW1iZXJzLCB1bmRlcnNjb3JlcyBhbmQgcGVyaW9kcy4nO1xuICAgIC8vIGNvbnN0IG5hbWUgPSAnT0xJVkUnO1xuICAgIC8vIGNvbnN0IHB3ZCA9ICdPTElWRSc7XG4gICAgLy8gY29uc3QgZW1haWwgPSAnZ2VldGFAZ21haWwuY29tJztcbiAgICBpZiAobmFtZS5sZW5ndGggIT09IDAgJiYgcHdkLmxlbmd0aCAhPT0gMCAmJiBjb25maXJtcHdkLmxlbmd0aCAhPT0gMCAmJlxuICAgICAgZW1haWwubGVuZ3RoICE9PSAwICYmIHB3ZCA9PT0gY29uZmlybXB3ZCAmJiBuYW1lVmVyaWZpZXMpIHtcbiAgICAgICQucG9zdCgnL3NpZ251cCcsIHtcbiAgICAgICAgICB1c2VybmFtZTogbmFtZSxcbiAgICAgICAgICBwYXNzd29yZDogcHdkLFxuICAgICAgICAgIGVtYWlsOiBlbWFpbFxuICAgICAgICB9KVxuICAgICAgICAuZmFpbChmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgaWYgKGRhdGEuc3RhdHVzID09PSA0MDApIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlVGV4dCA9IGRhdGEucmVzcG9uc2VKU09OO1xuICAgICAgICAgICAgaWYgKHJlc3BvbnNlVGV4dC5sZW5ndGggPj0gMSkge1xuICAgICAgICAgICAgICBzaG93TWVzc2FnZShyZXNwb25zZVRleHRbMF0ubXNnLCAnZXJyb3InKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIHNob3dNZXNzYWdlKHJlc3BvbnNlVGV4dC5tc2csICdlcnJvcicpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLmRvbmUoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgIHNob3dNZXNzYWdlKGRhdGEubXNnLCAnbXNnJyk7XG4gICAgICAgICAgJCgnLmJ0bnMnKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgICAgICQoJyNsb2dpbkxpbmsnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBkaXNwbGF5U2VhcmNoQmFyKGUpIHtcbiAgICBpZiAoZSkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cblxuICAgICQoJyNoZWFkZXJEaXYnKS5yZW1vdmVDbGFzcygnc2hvdycpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgJCgnI3NlYXJjaCcpLmFkZENsYXNzKCdzaG93Jyk7XG5cbiAgICAvKiBoaWRlIHJlc3Qgb2YgZGF0YSBmb3Igc2VhcmNoIHZpZXcgKi9cbiAgICAkKCcuanMtbm9uU2VhcmNoVmlldycpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgJCgnLmpzLXNlYXJjaFZpZXcnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICB9XG5cbiAgZnVuY3Rpb24gaGlkZVNlYXJjaEJhcihlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICQoJyNzZWFyY2gtdGV4dCcpLnZhbCgnJyk7XG4gICAgJCgnI2hlYWRlckRpdicpLnJlbW92ZUNsYXNzKCdoaWRlJykuYWRkQ2xhc3MoJ3Nob3cnKTtcbiAgICAkKCcjc2VhcmNoJykucmVtb3ZlQ2xhc3MoJ3Nob3cnKTtcblxuICAgIC8qIHNob3cgcmVzdCBvZiBkYXRhIGFuZCBoaWRlIHNlYXJjaCB2aWV3Ki9cbiAgICAkKCcuanMtbm9uU2VhcmNoVmlldycpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgJCgnLmpzLXNlYXJjaFZpZXcnKS5hZGRDbGFzcygnaGlkZScpO1xuICAgIC8vJCgnLmpzLXNlYXJjaFZpZXcnKS5lbXB0eSgpO1xuICAgIGlmICh3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuaW5kZXhPZigndXNlcicpID09PSAtMSkge1xuICAgICAgd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lID0gJy91c2VyL2hvbWUnO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3dVc2VyTWVudUQoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCB1c2VySWNvbiA9ICQoJyN1c2VyLW1lbnUnKTtcbiAgICBpZiAoIXVzZXJJY29uLmhhc0NsYXNzKCdzaG93JykpIHtcbiAgICAgICQoJyN1c2VyLW1lbnUnKS5hZGRDbGFzcygnc2hvdycpO1xuICAgIH0gZWxzZSB7XG4gICAgICAkKCcjdXNlci1tZW51JykucmVtb3ZlQ2xhc3MoJ3Nob3cnKTtcbiAgICB9XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3dVc2VyTWVudShlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IHVzZXJJY29uID0gJCgnI3VzZXItbWVudScpO1xuICAgICQoJyN1c2VyLW1lbnUnKS5hZGRDbGFzcygnc2hvdycpO1xuICAgIHVzZXJJY29uLmNzcygnd2lkdGgnLCAnMjUwcHgnKTtcbiAgICB1c2VySWNvbi5wcmVwZW5kKCc8ZGl2IGNsYXNzPVwiY2xvc2UtaWNvblwiPjxpIGNsYXNzPVwiZmkteFwiPjwvaT48L2Rpdj4nKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhpZGVVc2VyTWVudShlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IHVzZXJJY29uID0gJCgnI3VzZXItbWVudScpO1xuICAgICQoJyN1c2VyLW1lbnUnKS5yZW1vdmVDbGFzcygnc2hvdycpO1xuICAgIHVzZXJJY29uLmNzcygnd2lkdGgnLCAnMTgwcHgnKTtcbiAgICAkKCcuY2xvc2UtaWNvbicpLnJlbW92ZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gY2hhbmdlVHJhY2soZSkge1xuICAgIGlmICghJCh0aGlzKS5oYXNDbGFzcygnaGlnaGxpZ2h0JykgJiYgISgkKGUudGFyZ2V0KS5oYXNDbGFzcygnZGVsZXRlLXRyYWNrJykpICYmICEoJChlLnRhcmdldCkuaGFzQ2xhc3MoJ2RlbGV0ZU1lbnUnKSkpIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKDEpO1xuICAgICAgJCgnLnRyYWNrTGlzdCcpLnJlbW92ZUNsYXNzKCdoaWdobGlnaHQnKTtcbiAgICAgICQoJy50cmFja0l0ZW0nKS5yZW1vdmVDbGFzcygnZmktc291bmQnKTtcbiAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2hpZ2hsaWdodCcpO1xuICAgICAgJCh0aGlzKS5maW5kKCcudHJhY2tJdGVtJykuYWRkQ2xhc3MoJ2ZpLXNvdW5kJyk7XG4gICAgICBjb25zdCB0cmFja1NyYyA9ICQodGhpcykuZGF0YSgndHJhY2stc3JjJyk7XG4gICAgICAvL2NvbnN0IHN0ciA9IHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZTtcbiAgICAgIC8vY29uc3QgcGF0aCA9IHN0ci5zdWJzdHIoMCwgc3RyLmxhc3RJbmRleE9mKFwiL1wiKSArIDEpO1xuICAgICAgLy9jb25zdCB0cmFja0lkID0gJCh0aGlzKS5hdHRyKCdpZCcpO1xuICAgICAgbWVkaWFFbGUuc2V0U3JjKHRyYWNrU3JjKTtcbiAgICAgIG1lZGlhRWxlLmxvYWQoKTtcbiAgICAgIG1lZGlhRWxlLnBsYXkoKTtcbiAgICAgIGhpZ2hMaWdodFByZXZOZXh0KCk7XG4gICAgICAvL2hpc3RvcnkucHVzaFN0YXRlKHRyYWNrSWQsICcnLCBwYXRoICsgdHJhY2tJZCk7XG4gICAgICBjb25zdCB0cmFja0lkID0gJCh0aGlzKS5hdHRyKCdpZCcpO1xuICAgICAgdXBkYXRlTm9PZlBsYXlzKHRyYWNrSWQpO1xuICAgIH1cblxuICB9XG5cbiAgLyoqXG4gICAqIG9uIHBvcHN0YXRlIGhpZ2hsaWdodCB0aGUgcHJvcGVyIHRyYWNrXG4gICAqL1xuICAvLyAkKHdpbmRvdykub24oJ3BvcHN0YXRlJywgZnVuY3Rpb24oZSkge1xuICAvLyAgIGNvbnN0IHRyYWNrSWQgPSBlLm9yaWdpbmFsRXZlbnQuc3RhdGU7XG4gIC8vICAgaWYgKHRyYWNrSWQgIT09IG51bGwpIHtcbiAgLy8gICAgIGNvbnN0IHRyYWNrU3JjID0gJChgIyR7dHJhY2tJZH1gKS5kYXRhKCd0cmFjay1zcmMnKTtcbiAgLy8gICAgICQoJy50cmFja0xpc3QnKS5yZW1vdmVDbGFzcygnaGlnaGxpZ2h0Jyk7XG4gIC8vICAgICAkKCcudHJhY2tJdGVtJykucmVtb3ZlQ2xhc3MoJ2ZpLXNvdW5kJyk7XG4gIC8vICAgICAkKGAjJHt0cmFja0lkfWApLmFkZENsYXNzKCdoaWdobGlnaHQnKTtcbiAgLy8gICAgICQoYCMke3RyYWNrSWR9YCkuZmluZCgnLnRyYWNrSXRlbScpLmFkZENsYXNzKCdmaS1zb3VuZCcpO1xuICAvL1xuICAvLyAgICAgbWVkaWFFbGUuc2V0U3JjKHRyYWNrU3JjKTtcbiAgLy8gICAgIG1lZGlhRWxlLmxvYWQoKTtcbiAgLy8gICAgIG1lZGlhRWxlLnBsYXkoKTtcbiAgLy8gICB9IGVsc2Uge1xuICAvLyAgICAgY29uc3Qgc3RyID0gd2luZG93LmxvY2F0aW9uLnBhdGhuYW1lO1xuICAvLyAgICAgY29uc3QgaWQgPSBzdHIuc3Vic3RyKHN0ci5sYXN0SW5kZXhPZihcIi9cIikgKyAxLCBzdHIubGVuZ3RoKTtcbiAgLy8gICAgIGNvbnN0IHRyYWNrU3JjID0gJChgIyR7aWR9YCkuZGF0YSgndHJhY2stc3JjJyk7XG4gIC8vICAgICAkKCcudHJhY2tMaXN0JykucmVtb3ZlQ2xhc3MoJ2hpZ2hsaWdodCcpO1xuICAvLyAgICAgJCgnLnRyYWNrSXRlbScpLnJlbW92ZUNsYXNzKCdmaS1zb3VuZCcpO1xuICAvLyAgICAgJChgIyR7aWR9YCkuYWRkQ2xhc3MoJ2hpZ2hsaWdodCcpO1xuICAvLyAgICAgJChgIyR7aWR9YCkuZmluZCgnLnRyYWNrSXRlbScpLmFkZENsYXNzKCdmaS1zb3VuZCcpO1xuICAvL1xuICAvLyAgICAgbWVkaWFFbGUuc2V0U3JjKHRyYWNrU3JjKTtcbiAgLy8gICAgIG1lZGlhRWxlLmxvYWQoKTtcbiAgLy8gICAgIG1lZGlhRWxlLnBsYXkoKTtcbiAgLy8gICB9XG4gIC8vIH0pO1xuXG4gIC8qKlxuICAgKiBTZWFyY2hcbiAgICovXG4gIGZ1bmN0aW9uIGNhbGxTZWFyY2goZSkge1xuICAgIGlmIChlLmtleUNvZGUgPT09IDEzKSB7XG4gICAgICBzZWFyY2goZSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gc2VhcmNoKGUsIHN0ciwgcG9wc3RhdGUpIHtcbiAgICBpZiAoZSAhPT0gbnVsbCkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cblxuICAgICQoJy5qcy1zZWFyY2hWaWV3JykuZW1wdHkoKTtcbiAgICB2YXIgc2VhcmNoU3RyaW5nID0gKHN0ciAhPT0gdW5kZWZpbmVkKSA/IHN0ciA6ICQudHJpbSgkKCcjc2VhcmNoLXRleHQnKS52YWwoKSk7IC8qIHRyaW0gYmVnaW5uaW5nIGFuZCBlbmRpbmcgc3BhY2VzICovXG4gICAgc2VhcmNoU3RyaW5nID0gc2VhcmNoU3RyaW5nLnJlcGxhY2UoL1xccysvZywgJyAnKTtcbiAgICBzZWFyY2hTdHJpbmcgPSBlbmNvZGVVUklDb21wb25lbnQoc2VhcmNoU3RyaW5nKTtcblxuICAgIGlmIChzZWFyY2hTdHJpbmcubGVuZ3RoID4gMCAmJiBzZWFyY2hTdHJpbmcgIT09ICcgJykge1xuICAgICAgJC5wb3N0KGAvc2VhcmNoLyR7c2VhcmNoU3RyaW5nfWApXG4gICAgICAgIC5mYWlsKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAkKCcjc2VhcmNoQ29udCcpLmh0bWwoZGF0YSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAkKCcjc2VhcmNoQ29udCcpLmh0bWwoZGF0YSk7XG4gICAgICAgICAgJCgnI2pzLXNlYXJjaFJlc3VsdHMnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICAgIGlmIChwb3BzdGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBzdHIgPSBgL3NlYXJjaC8ke3NlYXJjaFN0cmluZ31gO1xuICAgICAgICAgICAgaGlzdG9yeS5wdXNoU3RhdGUoe1xuICAgICAgICAgICAgICBzZWFyY2g6IGRlY29kZVVSSUNvbXBvbmVudChzZWFyY2hTdHJpbmcpXG4gICAgICAgICAgICB9LCAnJywgc3RyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8vIGNvbnNvbGUubG9nKHdpbmRvdy5oaXN0b3J5LnN0YXRlKTtcbiAgLy8gY29uc29sZS5sb2cod2luZG93Lmhpc3RvcnkpO1xuXG4gIGlmICh3aW5kb3cuaGlzdG9yeS5zdGF0ZSAhPT0gbnVsbCkge1xuICAgIGNvbnN0IHN0YXRlID0gd2luZG93Lmhpc3Rvcnkuc3RhdGU7XG4gICAgaWYgKHN0YXRlLnNlYXJjaCAhPT0gdW5kZWZpbmVkICYmIHN0YXRlLmNhdGVnb3J5ID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGRpc3BsYXlTZWFyY2hCYXIoKTtcbiAgICAgICQoJyNzZWFyY2gtdGV4dCcpLnZhbChzdGF0ZS5zZWFyY2gpO1xuICAgICAgc2VhcmNoKG51bGwsIHN0YXRlLnNlYXJjaCwgJ25vUG9wc3RhdGUnKTtcbiAgICB9IGVsc2UgaWYgKHN0YXRlLnNlYXJjaCAhPT0gdW5kZWZpbmVkICYmIHN0YXRlLmNhdGVnb3J5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGRpc3BsYXlTZWFyY2hCYXIoKTtcbiAgICAgICQoJyNzZWFyY2gtdGV4dCcpLnZhbChzdGF0ZS5zZWFyY2gpO1xuICAgICAgc2VlQWxsUmVzdWx0cyhudWxsLCBzdGF0ZS5zZWFyY2gsIHN0YXRlLmNhdGVnb3J5LCAnbm9Qb3BzdGF0ZScpO1xuICAgIH0gZWxzZSBpZiAoc3RhdGUuY2F0ZWdvcnkgPT09ICdwbGF5bGlzdCcpIHtcbiAgICAgIHNlZUFsbFBsYXlsaXN0cyhudWxsLCAnbm9Qb3BzdGF0ZScpO1xuICAgIH0gZWxzZSBpZiAoc3RhdGUuY2F0ZWdvcnkgPT09ICdyZWNvbW1lbmRhdGlvbnMnKSB7XG4gICAgICBjYWxsUmVjb21tZW5kVGFiKCdub1BvcHN0YXRlJyk7XG4gICAgfSBlbHNlIGlmIChzdGF0ZS5jYXRlZ29yeSA9PT0gJ3RvcFRyZW5kJykge1xuICAgICAgY2FsbFRvcFRyZW5kVGFiKCdub1BvcHN0YXRlJyk7XG4gICAgfSBlbHNlIGlmIChzdGF0ZS5jYXRlZ29yeSA9PT0gJ21vc3RQbGF5ZWQnKSB7XG4gICAgICBjYWxsTW9zdFBsYXllZFRhYignbm9Qb3BzdGF0ZScpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBvbiBwb3BzdGF0ZSBoaWdobGlnaHQgZ2V0IHRoZSBwcm9wZXIgdmlld1xuICAgKi9cblxuICAkKHdpbmRvdykub24oJ3BvcHN0YXRlJywgZnVuY3Rpb24oZSkge1xuICAgIGNvbnN0IHN0YXRlID0gZS5vcmlnaW5hbEV2ZW50LnN0YXRlO1xuICAgIGlmIChzdGF0ZSA9PT0gbnVsbCkge1xuICAgICAgY29uc3QgcGF0aCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xuICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBwYXRoO1xuICAgIH0gZWxzZSBpZiAoc3RhdGUuc2VhcmNoICE9PSB1bmRlZmluZWQgJiYgc3RhdGUuY2F0ZWdvcnkgPT09IHVuZGVmaW5lZCkge1xuICAgICAgZGlzcGxheVNlYXJjaEJhcihlKTtcbiAgICAgICQoJyNzZWFyY2gtdGV4dCcpLnZhbChzdGF0ZS5zZWFyY2gpO1xuICAgICAgc2VhcmNoKGUsIHN0YXRlLnNlYXJjaCwgJ25vUG9wc3RhdGUnKTtcbiAgICB9IGVsc2UgaWYgKHN0YXRlLnNlYXJjaCAhPT0gdW5kZWZpbmVkICYmIHN0YXRlLmNhdGVnb3J5ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGRpc3BsYXlTZWFyY2hCYXIoZSk7XG4gICAgICAkKCcjc2VhcmNoLXRleHQnKS52YWwoc3RhdGUuc2VhcmNoKTtcbiAgICAgIHNlZUFsbFJlc3VsdHMoZSwgc3RhdGUuc2VhcmNoLCBzdGF0ZS5jYXRlZ29yeSwgJ25vUG9wc3RhdGUnKTtcbiAgICB9IGVsc2UgaWYgKHN0YXRlLmNhdGVnb3J5ID09PSAncGxheWxpc3QnKSB7XG4gICAgICBzZWVBbGxQbGF5bGlzdHMoZSwgJ25vUG9wc3RhdGUnKTtcbiAgICB9IGVsc2UgaWYgKHN0YXRlLmNhdGVnb3J5ID09PSAncmVjb21tZW5kYXRpb25zJykge1xuICAgICAgY2FsbFJlY29tbWVuZFRhYignbm9Qb3BzdGF0ZScpO1xuICAgIH0gZWxzZSBpZiAoc3RhdGUuY2F0ZWdvcnkgPT09ICd0b3BUcmVuZCcpIHtcbiAgICAgIGNhbGxUb3BUcmVuZFRhYignbm9Qb3BzdGF0ZScpO1xuICAgIH0gZWxzZSBpZiAoc3RhdGUuY2F0ZWdvcnkgPT09ICdtb3N0UGxheWVkJykge1xuICAgICAgY2FsbE1vc3RQbGF5ZWRUYWIoJ25vUG9wc3RhdGUnKTtcbiAgICB9XG5cbiAgfSk7XG5cbiAgZnVuY3Rpb24gc2VlQWxsUmVzdWx0cyhlLCBzcmNoU3RyLCBjYXRlZ3J5LCBwb3BzdGF0ZSkge1xuICAgIGlmIChlICE9PSBudWxsKSB7XG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgfVxuXG4gICAgdmFyIHNlYXJjaFN0ciA9IChzcmNoU3RyICE9PSB1bmRlZmluZWQpID8gc3JjaFN0ciA6ICQoJy5zZWFyY2hTdHInKS5odG1sKCk7XG4gICAgY29uc3QgY2F0ZWdvcnkgPSAoY2F0ZWdyeSAhPT0gdW5kZWZpbmVkKSA/IGNhdGVncnkgOiAkKHRoaXMpLmRhdGEoJ2NhdGVnb3J5Jyk7XG5cbiAgICBzZWFyY2hTdHIgPSBlbmNvZGVVUklDb21wb25lbnQoc2VhcmNoU3RyKTtcblxuICAgICQucG9zdChgL3NlYXJjaC8ke2NhdGVnb3J5fS8ke3NlYXJjaFN0cn1gKVxuICAgICAgLmZhaWwoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAkKCcjc2VhcmNoQ29udCcpLmh0bWwoZGF0YSk7XG4gICAgICB9KVxuICAgICAgLmRvbmUoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAkKCcjc2VhcmNoQ29udCcpLmh0bWwoZGF0YSk7XG4gICAgICAgICQoJyNqcy1zZWFyY2hSZXN1bHRzJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgaWYgKHBvcHN0YXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBjb25zdCBzdHIgPSBgL3NlYXJjaC8ke2NhdGVnb3J5fS8ke3NlYXJjaFN0cn1gO1xuICAgICAgICAgIGhpc3RvcnkucHVzaFN0YXRlKHtcbiAgICAgICAgICAgIHNlYXJjaDogZGVjb2RlVVJJQ29tcG9uZW50KHNlYXJjaFN0ciksXG4gICAgICAgICAgICBjYXRlZ29yeTogY2F0ZWdvcnlcbiAgICAgICAgICB9LCAnJywgc3RyKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBzZWVBbGxQbGF5bGlzdHMoZSwgcG9wc3RhdGUpIHtcbiAgICBpZiAoZSAhPT0gbnVsbCkge1xuICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIH1cblxuICAgICQoJy5ob21lVGFic0xpc3QgbGkgYScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAkKFwiLmhvbWVUYWJzTGlzdCBsaSBhW2RhdGEtdGFiLWNhdGVnb3J5PSdwbGF5bGlzdFRhYiddXCIpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAkLnBvc3QoJy91c2VyL3BsYXlsaXN0cy9zZWVBbGwnKVxuICAgICAgLmZhaWwoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAkKCcjcGxheWxpc3RDb250JykuaHRtbChkYXRhKTtcbiAgICAgIH0pXG4gICAgICAuZG9uZShmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICQoJyNwbGF5bGlzdENvbnQnKS5odG1sKGRhdGEpO1xuICAgICAgICAkKCcuanMtbm9uUGxheWxpc3QnKS5hZGRDbGFzcygnaGlkZScpO1xuXG4gICAgICAgIGlmIChwb3BzdGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgY29uc3Qgc3RyID0gJy91c2VyL3BsYXlsaXN0cy9zZWVBbGwnO1xuICAgICAgICAgIGhpc3RvcnkucHVzaFN0YXRlKHtcbiAgICAgICAgICAgIGNhdGVnb3J5OiAncGxheWxpc3QnXG4gICAgICAgICAgfSwgJycsIHN0cik7XG4gICAgICAgIH1cblxuICAgICAgfSk7XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIGxpbmtBY3RpdmUoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9wZW5QbGF5bGlzdChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNsZWFyTWVzc2FnZSgpO1xuICAgICQoJy5wbGF5TGlzdFBvcHVwJykuc2xpZGVUb2dnbGUoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNsb3NlQ3JlYXRlUGxheWxpc3QoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAkKCcucGxheUxpc3RQb3B1cCcpLnNsaWRlVG9nZ2xlKCk7XG4gIH1cblxuICBmdW5jdGlvbiBjcmVhdGVQbGF5bGlzdE9uRW50ZXIoZSkge1xuICAgIGlmIChlLmtleUNvZGUgPT09IDEzKSB7XG4gICAgICBjcmVhdGVQbGF5bGlzdChlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjcmVhdGVQbGF5bGlzdChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNsZWFyTWVzc2FnZSgpO1xuXG4gICAgdmFyIHBsYXlsaXN0bmFtZSA9ICQudHJpbSgkKFwiI3BsYXlsaXN0TmFtZVwiKS52YWwoKSk7XG5cbiAgICBpZiAocGxheWxpc3RuYW1lLmxlbmd0aCA9PT0gMCkge1xuICAgICAgc2hvd0Vycm9yQ2lyY2xlKCdwbGF5bGlzdE5hbWUnKTtcbiAgICAgICQoJyNlbXB0eUZpZWxkcycpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgfVxuXG4gICAgcGxheWxpc3RuYW1lID0gZW5jb2RlVVJJQ29tcG9uZW50KHBsYXlsaXN0bmFtZSk7XG5cbiAgICB2YXIgbGltaXQgPSA5O1xuICAgIHZhciBwbGF5UGFnZSA9IGZhbHNlO1xuXG4gICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZS5pbmRleE9mKCcvcGxheS8nKSAhPT0gLTEpIHtcbiAgICAgIGxpbWl0ID0gNTAwMDtcbiAgICAgIHBsYXlQYWdlID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSA9PT0gJy91c2VyL3BsYXlsaXN0cy9zZWVBbGwnKSB7XG4gICAgICBsaW1pdCA9IDUwMDA7XG4gICAgfVxuXG4gICAgaWYgKHBsYXlsaXN0bmFtZS5sZW5ndGggIT09IDApIHtcbiAgICAgICQucG9zdCgnL3VzZXIvY3JlYXRlUGxheWxpc3QnLCB7XG4gICAgICAgICAgcGxheWxpc3ROYW1lOiBwbGF5bGlzdG5hbWUsXG4gICAgICAgICAgbGltaXQ6IGxpbWl0LFxuICAgICAgICAgIHBsYXlQYWdlOiBwbGF5UGFnZVxuICAgICAgICB9KVxuICAgICAgICAuZmFpbChmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgY29uc3QgcmVzcG9uc2VUZXh0ID0gZGF0YS5yZXNwb25zZUpTT047XG4gICAgICAgICAgc2hvd01lc3NhZ2UocmVzcG9uc2VUZXh0Lm1zZywgJ2Vycm9yJyk7XG4gICAgICAgIH0pXG4gICAgICAgIC5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lLmluZGV4T2YoJy9wbGF5LycpICE9PSAtMSkge1xuICAgICAgICAgICAgY2xvc2VDcmVhdGVQbGF5bGlzdChlKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgJCgnI3BsYXlsaXN0Q29udCcpLmh0bWwoZGF0YSk7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGNsb3NlRGVsZXRlUGxheWxpc3QoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAkKCcuZGVsZXRlUGxheWxpc3RQb3B1cCcpLnNsaWRlVG9nZ2xlKCk7XG4gICAgJCgnI2RlbGV0ZUJ0bicpLnJlbW92ZUF0dHIoJ2RhdGEtcGxheWxpc3QtaWQnKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9wZW5EZWxldGVQbGF5bGlzdFBvcHVwKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY2xlYXJNZXNzYWdlKCk7XG4gICAgdmFyIHBsYXlsaXN0SWQgPSAkKHRoaXMpLmRhdGEoJ3BsYXlsaXN0LWlkJyk7XG4gICAgJCgnLmRlbGV0ZVBsYXlsaXN0UG9wdXAnKS5zbGlkZVRvZ2dsZSgpO1xuICAgICQoJyNkZWxldGVCdG4nKS5hdHRyKCdkYXRhLXBsYXlsaXN0LWlkJywgcGxheWxpc3RJZCk7XG4gIH1cblxuICBmdW5jdGlvbiBkZWxldGVQbGF5bGlzdChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgY2xlYXJNZXNzYWdlKCk7XG4gICAgdmFyIHBsYXlsaXN0SWQgPSAkKCcjZGVsZXRlQnRuJykuYXR0cignZGF0YS1wbGF5bGlzdC1pZCcpO1xuICAgIHZhciBsaW1pdCA9IDk7XG5cbiAgICBpZiAod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lID09PSAnL3VzZXIvcGxheWxpc3RzL3NlZUFsbCcpIHtcbiAgICAgIGxpbWl0ID0gNTAwMDtcbiAgICB9XG4gICAgJC5wb3N0KCcvdXNlci9kZWxldGVQbGF5bGlzdCcsIHtcbiAgICAgICAgcGxheWxpc3RJZDogcGxheWxpc3RJZCxcbiAgICAgICAgbGltaXQ6IGxpbWl0XG4gICAgICB9KS5mYWlsKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlVGV4dCA9IGRhdGEucmVzcG9uc2VKU09OO1xuICAgICAgICBzaG93TWVzc2FnZShyZXNwb25zZVRleHQubXNnLCAncGxheUxpc3RlcnJvcicpO1xuICAgICAgfSlcbiAgICAgIC5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgJCgnI3BsYXlsaXN0Q29udCcpLmh0bWwoZGF0YSk7XG4gICAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9wZW5FZGl0UGxheWxpc3RQb3B1cChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNsZWFyTWVzc2FnZSgpO1xuICAgIHZhciBwbGF5bGlzdElkID0gJCh0aGlzKS5hdHRyKCdkYXRhLXBsYXlsaXN0LWlkJyk7XG4gICAgdmFyIHBsYXlsaXN0TmFtZSA9ICQodGhpcykuY2xvc2VzdCgnbGknKS5maW5kKCdzcGFuLnBsYXlsaXN0TmFtZScpLmh0bWwoKTtcbiAgICAkKCcuZWRpdFBsYXlsaXN0UG9wdXAnKS5zbGlkZVRvZ2dsZSgpO1xuICAgICQoJyNlZGl0cGxheWxpc3ROYW1lJykudmFsKHBsYXlsaXN0TmFtZSk7XG4gICAgJCgnI2VkaXRCdG4nKS5hdHRyKCdkYXRhLXBsYXlsaXN0LWlkJywgcGxheWxpc3RJZCk7XG4gIH1cblxuICBmdW5jdGlvbiBjbG9zZUVkaXRQbGF5bGlzdFBvcHVwKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgJCgnLmVkaXRQbGF5bGlzdFBvcHVwJykuc2xpZGVUb2dnbGUoKTtcbiAgICAkKCcjZWRpdEJ0bicpLnJlbW92ZUF0dHIoJ2RhdGEtcGxheWxpc3QtaWQnKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGVkaXRQbGF5bGlzdE5hbWVPbkVudGVyKGUpIHtcbiAgICBpZiAoZS5rZXlDb2RlID09PSAxMykge1xuICAgICAgZWRpdFBsYXlsaXN0TmFtZShlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBlZGl0UGxheWxpc3ROYW1lKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY2xlYXJNZXNzYWdlKCk7XG5cbiAgICB2YXIgcGxheWxpc3RJZCA9ICQoJyNlZGl0QnRuJykuYXR0cignZGF0YS1wbGF5bGlzdC1pZCcpO1xuICAgIHZhciBwbGF5bGlzdG5hbWUgPSAkLnRyaW0oJChcIiNlZGl0cGxheWxpc3ROYW1lXCIpLnZhbCgpKTtcblxuICAgIGlmIChwbGF5bGlzdG5hbWUubGVuZ3RoID09PSAwKSB7XG4gICAgICBzaG93RXJyb3JDaXJjbGUoJ2VkaXRwbGF5bGlzdE5hbWUnKTtcbiAgICAgICQoJyNlbXB0eUZpZWxkJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICB9XG5cbiAgICBpZiAocGxheWxpc3RuYW1lLmxlbmd0aCAhPT0gMCkge1xuICAgICAgcGxheWxpc3RuYW1lID0gZW5jb2RlVVJJQ29tcG9uZW50KHBsYXlsaXN0bmFtZSk7XG5cbiAgICAgICQucG9zdCgnL3VzZXIvZWRpdFBsYXlsaXN0bmFtZScsIHtcbiAgICAgICAgICBwbGF5bGlzdElkOiBwbGF5bGlzdElkLFxuICAgICAgICAgIHBsYXlsaXN0bmFtZTogcGxheWxpc3RuYW1lXG4gICAgICAgIH0pLmZhaWwoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgIGNvbnN0IHJlc3BvbnNlVGV4dCA9IGRhdGEucmVzcG9uc2VKU09OO1xuICAgICAgICAgIHNob3dNZXNzYWdlKHJlc3BvbnNlVGV4dC5tc2csICdlZGl0UGxheWxpc3RFcnJvcicpO1xuICAgICAgICB9KVxuICAgICAgICAuZG9uZShmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgdmFyIG5hbWUgPSBkZWNvZGVVUklDb21wb25lbnQoZGF0YS5tc2cpO1xuICAgICAgICAgICQoYGxpIyR7cGxheWxpc3RJZH1gKS5maW5kKCdzcGFuLnBsYXlsaXN0TmFtZScpLmh0bWwobmFtZSk7XG4gICAgICAgICAgY2xvc2VFZGl0UGxheWxpc3RQb3B1cChlKTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gIH1cblxuXG4gIGZ1bmN0aW9uIHBsYXlQbGF5bGlzdChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGlmICghJChlLnRhcmdldCkuaGFzQ2xhc3MoJ3BsYXlsaXN0LW1hbmFnZScpICYmXG4gICAgICAhJChlLnRhcmdldCkuaGFzQ2xhc3MoJ3BsYXlsaXN0TWFuYWdlJykgJiZcbiAgICAgICEkKGUudGFyZ2V0KS5oYXNDbGFzcygnZWRpdFBsYXlsaXN0TmFtZScpICYmXG4gICAgICAhJChlLnRhcmdldCkuaGFzQ2xhc3MoJ2RlbGV0ZVBsYXlsaXN0JykpIHtcbiAgICAgIGNvbnN0IHBsYXlsaXN0SWQgPSAkKHRoaXMpLmNsb3Nlc3QoJ2xpJykuYXR0cignaWQnKTtcblxuICAgICAgJC5wb3N0KGAvcGxheS9wbGF5bGlzdC8ke3BsYXlsaXN0SWR9YClcbiAgICAgICAgLmZhaWwoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgIGNvbnN0IHJlc3BvbnNlVGV4dCA9IGRhdGEucmVzcG9uc2VKU09OO1xuICAgICAgICAgIHNob3dNZXNzYWdlKHJlc3BvbnNlVGV4dC5tc2csICdwbGF5bGlzdFRyYWNrRXJyb3InKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmRvbmUoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgIGlmIChkYXRhLm1zZyA+IDApIHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gYC9wbGF5L3BsYXlsaXN0LyR7cGxheWxpc3RJZH1gO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gb3BlblBsYXlsaXN0TWVudShlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IHBsYXlsaXN0RWxlID0gJCh0aGlzKS5uZXh0KCcucGxheWxpc3QtYWN0aW9ucycpO1xuICAgIGNvbnN0IGRpc3BsYXlWYWwgPSAkKHRoaXMpLm5leHQoJy5wbGF5bGlzdC1hY3Rpb25zJykuY3NzKCdkaXNwbGF5Jyk7XG4gICAgJCgnLnBsYXlsaXN0LWFjdGlvbnMnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgIGlmIChkaXNwbGF5VmFsID09PSAnYmxvY2snKSB7XG4gICAgICBwbGF5bGlzdEVsZS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgIH0gZWxzZSB7XG4gICAgICBwbGF5bGlzdEVsZS5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBvcGVuQWRkVG9QbGF5bGlzdChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGlmICghJCh0aGlzKS5oYXNDbGFzcygnaW5hY3RpdmUnKSkge1xuICAgICAgY2xlYXJNZXNzYWdlKCk7XG4gICAgICB2YXIgdHJhY2tJZCA9ICQoJ2xpLnRyYWNrTGlzdC5oaWdobGlnaHQnKS5hdHRyKCdpZCcpO1xuXG4gICAgICAkLnBvc3QoJy91c2VyL3BsYXlsaXN0cycpXG4gICAgICAgIC5mYWlsKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICBjb25zdCByZXNwb25zZVRleHQgPSBkYXRhLnJlc3BvbnNlSlNPTjtcbiAgICAgICAgICBzaG93TWVzc2FnZShyZXNwb25zZVRleHQubXNnLCAncGxheUxpc3RlcnJvcicpO1xuICAgICAgICB9KVxuICAgICAgICAuZG9uZShmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgJCgnI3BsYXlsaXN0Q29udCcpLmh0bWwoZGF0YSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAkKCcuYWRkVG9QbGF5bGlzdFBvcHVwJykuc2xpZGVUb2dnbGUoKTtcbiAgICAgICQoJy5hZGRUb1BsYXlsaXN0UG9wdXAnKS5hdHRyKCdkYXRhLXRyYWNrLWlkJywgdHJhY2tJZCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY2xvc2VBZGRUb1BsYXlsaXN0KGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgJCgnLmFkZFRvUGxheWxpc3RQb3B1cCcpLnJlbW92ZUF0dHIoJ2RhdGEtdHJhY2staWQnKTtcbiAgICAkKCcuYWRkVG9QbGF5bGlzdFBvcHVwJykuc2xpZGVUb2dnbGUoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZFRvUGxheWxpc3QoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgIHZhciB0cmFja0lkID0gJCgnLmFkZFRvUGxheWxpc3RQb3B1cCcpLmF0dHIoJ2RhdGEtdHJhY2staWQnKTtcbiAgICB2YXIgcGxheWxpc3RJZCA9ICQodGhpcykuYXR0cignaWQnKTtcblxuICAgICQucG9zdCgnL3VzZXIvcGxheWxpc3QvYWRkdHJhY2t0b3BsYXlsaXN0Jywge1xuICAgICAgICB0cmFja0lkOiB0cmFja0lkLFxuICAgICAgICBwbGF5bGlzdElkOiBwbGF5bGlzdElkXG4gICAgICB9KVxuICAgICAgLmZhaWwoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICBjb25zdCByZXNwb25zZVRleHQgPSBkYXRhLnJlc3BvbnNlSlNPTjtcbiAgICAgICAgc2hvd01lc3NhZ2UocmVzcG9uc2VUZXh0Lm1zZywgJ3BsYXlMaXN0ZXJyb3InKTtcbiAgICAgIH0pXG4gICAgICAuZG9uZShmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICQoJyNwbGF5bGlzdENvbnQnKS5odG1sKGRhdGEpO1xuICAgICAgICBjbG9zZUFkZFRvUGxheWxpc3QoZSk7XG4gICAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIG9wZW5EZWxldGVNZW51KGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgZGVsZXRlRWxlID0gJCh0aGlzKS5uZXh0KCcuZGVsZXRlTWVudScpO1xuICAgIGNvbnN0IGRpc3BsYXlWYWwgPSAkKHRoaXMpLm5leHQoJy5kZWxldGVNZW51JykuY3NzKCdkaXNwbGF5Jyk7XG4gICAgJCgnLmRlbGV0ZU1lbnUnKS5jc3MoJ2Rpc3BsYXknLCAnbm9uZScpO1xuICAgIGlmIChkaXNwbGF5VmFsID09PSAnYmxvY2snKSB7XG4gICAgICBkZWxldGVFbGUuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZGVsZXRlRWxlLmNzcygnZGlzcGxheScsICdibG9jaycpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGRlbGV0ZVRyYWNrKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgbGlFbGUgPSAkKHRoaXMpLmNsb3Nlc3QoJ2xpLnRyYWNrTGlzdCcpO1xuICAgIGNvbnN0IHRyYWNrSWQgPSBsaUVsZS5hdHRyKCdpZCcpO1xuICAgIGNvbnN0IHBsYXlsaXN0SWQgPSAkKCcucGxheWxpc3QtbmFtZScpLmF0dHIoJ2RhdGEtcGxheWxpc3QtaWQnKTtcblxuICAgICQucG9zdCgnL3VzZXIvcGxheWxpc3QvZGVsZXRlVHJhY2snLCB7XG4gICAgICAgIHRyYWNrSWQ6IHRyYWNrSWQsXG4gICAgICAgIHBsYXlsaXN0SWQ6IHBsYXlsaXN0SWRcbiAgICAgIH0pXG4gICAgICAuZmFpbChmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICBjb25zdCByZXNwb25zZVRleHQgPSBkYXRhLnJlc3BvbnNlSlNPTjtcbiAgICAgICAgc2hvd01lc3NhZ2UocmVzcG9uc2VUZXh0Lm1zZywgJ3RyYWNrZXJyb3InKTtcbiAgICAgIH0pXG4gICAgICAuZG9uZShmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICBsaUVsZS5yZW1vdmUoKTtcbiAgICAgICAgaGlnaExpZ2h0UHJldk5leHQoKTtcbiAgICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlSG9tZVRhYnNDbGljayhlLCBwb3BzdGF0ZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBjYXRlZ29yeSA9ICQodGhpcykuYXR0cignZGF0YS10YWItY2F0ZWdvcnknKTtcblxuICAgICQoJy5ob21lVGFic0xpc3QgbGkgYScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAkKHRoaXMpLmFkZENsYXNzKCdhY3RpdmUnKTtcblxuICAgIGlmIChjYXRlZ29yeSA9PT0gJ3BsYXlsaXN0VGFiJykge1xuICAgICAgLy9pZiAod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICE9PSAnL3VzZXIvcGxheWxpc3RzL3NlZUFsbCcpIHtcbiAgICAgICQucG9zdCgnL3VzZXIvcGxheWxpc3RzL3NlZUFsbCcpXG4gICAgICAgIC5mYWlsKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAkKCcjcGxheWxpc3RDb250JykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgICAkKCcuanMtbm9uUGxheWxpc3QnKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgICAgICQoJyNwbGF5bGlzdENvbnQnKS5odG1sKGRhdGEpO1xuICAgICAgICB9KVxuICAgICAgICAuZG9uZShmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgJCgnI3BsYXlsaXN0Q29udCcpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgICAgICAgJCgnLmpzLW5vblBsYXlsaXN0JykuYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgICAkKCcjcGxheWxpc3RDb250JykuaHRtbChkYXRhKTtcblxuICAgICAgICAgIGlmIChwb3BzdGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBjb25zdCBzdHIgPSAnL3VzZXIvcGxheWxpc3RzL3NlZUFsbCc7XG4gICAgICAgICAgICBoaXN0b3J5LnB1c2hTdGF0ZSh7XG4gICAgICAgICAgICAgIGNhdGVnb3J5OiAncGxheWxpc3QnXG4gICAgICAgICAgICB9LCAnJywgc3RyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgLy99XG4gICAgfSBlbHNlIGlmIChjYXRlZ29yeSA9PT0gJ3JlY29tbWVuZFRhYicpIHtcbiAgICAgIC8vaWYgKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSAhPT0gJy91c2VyL3JlY29tbWVuZGF0aW9ucy9zZWVBbGwnKSB7XG4gICAgICBjYWxsUmVjb21tZW5kVGFiKHBvcHN0YXRlKTtcbiAgICAgIC8vfVxuICAgIH0gZWxzZSBpZiAoY2F0ZWdvcnkgPT09ICd0b3BUcmVuZFRhYicpIHtcbiAgICAgIC8vaWYgKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSAhPT0gJy91c2VyL3RvcFRyZW5kaW5nL3NlZUFsbCcpIHtcbiAgICAgIGNhbGxUb3BUcmVuZFRhYihwb3BzdGF0ZSk7XG4gICAgICAvL31cbiAgICB9IGVsc2UgaWYgKGNhdGVnb3J5ID09PSAncGxheWVkVGFiJykge1xuICAgICAgLy9pZiAod2luZG93LmxvY2F0aW9uLnBhdGhuYW1lICE9PSAnL3VzZXIvbW9zdFBsYXllZC9zZWVBbGwnKSB7XG4gICAgICBjYWxsTW9zdFBsYXllZFRhYihwb3BzdGF0ZSk7XG4gICAgICAvL31cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBjYWxsUmVjb21tZW5kVGFiKHBvcHN0YXRlKSB7XG4gICAgJC5wb3N0KCcvdXNlci9yZWNvbW1lbmRhdGlvbnMvc2VlQWxsJylcbiAgICAgIC5mYWlsKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgJCgnc2VjdGlvbicpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgICAgICQoJyNyZWNvbW1lbmRhdGlvbnNDb250JykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgJCgnI2hvbWVUYWJzQ29udCcpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgICAgICQoJyNyZWNvbW1lbmRhdGlvbnNDb250JykuaHRtbChkYXRhKTtcbiAgICAgIH0pXG4gICAgICAuZG9uZShmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICQoJ3NlY3Rpb24nKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgICAkKCcjcmVjb21tZW5kYXRpb25zQ29udCcpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgICAgICQoJyNob21lVGFic0NvbnQnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICAkKCcjcmVjb21tZW5kYXRpb25zQ29udCcpLmh0bWwoZGF0YSk7XG5cbiAgICAgICAgaWYgKHBvcHN0YXRlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICBjb25zdCBzdHIgPSAnL3VzZXIvcmVjb21tZW5kYXRpb25zL3NlZUFsbCc7XG4gICAgICAgICAgaGlzdG9yeS5wdXNoU3RhdGUoe1xuICAgICAgICAgICAgY2F0ZWdvcnk6ICdyZWNvbW1lbmRhdGlvbnMnXG4gICAgICAgICAgfSwgJycsIHN0cik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gY2FsbFRvcFRyZW5kVGFiKHBvcHN0YXRlKSB7XG4gICAgJC5wb3N0KCcvdXNlci90b3BUcmVuZGluZy9zZWVBbGwnKVxuICAgICAgLmZhaWwoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAkKCdzZWN0aW9uJykuYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgJCgnI3RvcFRyZW5kQ29udCcpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgICAgICQoJyNob21lVGFic0NvbnQnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICAkKCcjdG9wVHJlbmRDb250JykuaHRtbChkYXRhKTtcbiAgICAgIH0pXG4gICAgICAuZG9uZShmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICQoJ3NlY3Rpb24nKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgICAkKCcjdG9wVHJlbmRDb250JykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgJCgnI2hvbWVUYWJzQ29udCcpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgICAgICQoJyN0b3BUcmVuZENvbnQnKS5odG1sKGRhdGEpO1xuXG4gICAgICAgIGlmIChwb3BzdGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgY29uc3Qgc3RyID0gJy91c2VyL3RvcFRyZW5kaW5nL3NlZUFsbCc7XG4gICAgICAgICAgaGlzdG9yeS5wdXNoU3RhdGUoe1xuICAgICAgICAgICAgY2F0ZWdvcnk6ICd0b3BUcmVuZCdcbiAgICAgICAgICB9LCAnJywgc3RyKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIGNhbGxNb3N0UGxheWVkVGFiKHBvcHN0YXRlKSB7XG4gICAgJC5wb3N0KCcvdXNlci9tb3N0UGxheWVkL3NlZUFsbCcpXG4gICAgICAuZmFpbChmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBkYXRhO1xuICAgICAgICBpZiAoZGF0YS5yZXNwb25zZUpTT04gIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgIHJlc3VsdCA9IGRhdGEucmVzcG9uc2VKU09OLm1zZ1xuICAgICAgICB9XG4gICAgICAgICQoJ3NlY3Rpb24nKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgICAkKCcjbW9zdFBsYXllZENvbnQnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICAkKCcjaG9tZVRhYnNDb250JykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgJCgnI21vc3RQbGF5ZWRDb250JykuaHRtbChyZXN1bHQpO1xuICAgICAgfSlcbiAgICAgIC5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgJCgnc2VjdGlvbicpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgICAgICQoJyNtb3N0UGxheWVkQ29udCcpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgICAgICQoJyNob21lVGFic0NvbnQnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICAkKCcjbW9zdFBsYXllZENvbnQnKS5odG1sKGRhdGEpO1xuXG4gICAgICAgIGlmIChwb3BzdGF0ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgY29uc3Qgc3RyID0gJy91c2VyL21vc3RQbGF5ZWQvc2VlQWxsJztcbiAgICAgICAgICBoaXN0b3J5LnB1c2hTdGF0ZSh7XG4gICAgICAgICAgICBjYXRlZ29yeTogJ21vc3RQbGF5ZWQnXG4gICAgICAgICAgfSwgJycsIHN0cik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9XG5cbiAgdmFyIHNvcnRJZHMgPSBbXTtcblxuICBmdW5jdGlvbiBhbGxvd0RyYWdEcm9wKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgJCgnbGkgLnRyYWNrVGltZScpLnRvZ2dsZUNsYXNzKCdoaWRlJyk7XG4gICAgJCgnbGkgLmRyYWdIYW5kbGUnKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG4gICAgJCgnbGkgLmRlbGV0ZU1lbnUnKS50b2dnbGVDbGFzcygnYWN0aXZlJyk7XG5cbiAgICBpZiAoJCh0aGlzKS50ZXh0KCkgPT09ICdFZGl0Jykge1xuXG4gICAgICBpZiAoJCgnbGkgLmRyYWdIYW5kbGUnKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcbiAgICAgICAgJCh0aGlzKS5odG1sKCdEb25lJyk7XG4gICAgICAgICQoJyN0cmFja3MnKS5zb3J0YWJsZSh7XG4gICAgICAgICAgaGFuZGxlOiAnZGl2LmRyYWdIYW5kbGUnLFxuICAgICAgICAgIGN1cnNvcjogJ2dyYWInLFxuICAgICAgICAgIHVwZGF0ZTogZnVuY3Rpb24oZXZlbnQsIHVpKSB7XG4gICAgICAgICAgICB2YXIgc29ydGVkSWRzID0gJCgnI3RyYWNrcycpLnNvcnRhYmxlKCd0b0FycmF5Jyk7XG4gICAgICAgICAgICBzb3J0SWRzID0gc29ydGVkSWRzO1xuXG4gICAgICAgICAgICAvKiB1cGRhdGUgZGIgd2l0aCBuZXcgcmUtb3JnYW5pemF0aW9uKi9cbiAgICAgICAgICAgIHZhciBvYmogPSBzb3J0SWRzLnJlZHVjZShmdW5jdGlvbihvLCB2YWwsIGlkeCkge1xuICAgICAgICAgICAgICBvW3ZhbF0gPSBpZHggKyAxO1xuICAgICAgICAgICAgICByZXR1cm4gbztcbiAgICAgICAgICAgIH0sIHt9KTtcbiAgICAgICAgICAgIGNvbnN0IHBsYXlsaXN0SWQgPSAkKCdkaXYucGxheWxpc3QtbmFtZScpLmF0dHIoJ2RhdGEtcGxheWxpc3QtaWQnKTtcbiAgICAgICAgICAgICQucG9zdCgnL3BsYXkvcGxheWxpc3RDaGFuZ2UvcmVhcnJhbmdlRGF0YScsIHtcbiAgICAgICAgICAgICAgICBwbGF5bGlzdElkOiBwbGF5bGlzdElkLFxuICAgICAgICAgICAgICAgIHNvcnRlZElkczogb2JqXG4gICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIC5mYWlsKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLmRvbmUoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgICAgIGhpZ2hMaWdodFByZXZOZXh0KCk7XG4gICAgICAgICAgICAgIH0pXG5cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoJyN0cmFja3MgZGl2LmRyYWdIYW5kbGUnKS5kaXNhYmxlU2VsZWN0aW9uKCk7XG5cbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgJCh0aGlzKS5odG1sKCdFZGl0Jyk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gY2FsbENvbmNlcnRTZWFyY2goZSkge1xuICAgIGlmIChlLmtleUNvZGUgPT09IDEzKSB7XG4gICAgICBzZWFyY2hDb25jZXJ0KGUpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHNlYXJjaENvbmNlcnQoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICQoJy5hcGlsb2FkaW5nU2NyZWVuJykudG9nZ2xlKCdhY3RpdmUnKTtcblxuICAgIHZhciBjb25jZXJ0VGV4dCA9ICQudHJpbSgkKCcjY29uY2VydC10ZXh0JykudmFsKCkpO1xuXG4gICAgY29uY2VydFRleHQgPSBjb25jZXJ0VGV4dC5yZXBsYWNlKC9cXHMrL2csICcgJyk7XG4gICAgY29uY2VydFRleHQgPSBlbmNvZGVVUklDb21wb25lbnQoY29uY2VydFRleHQpO1xuXG4gICAgaWYgKGNvbmNlcnRUZXh0Lmxlbmd0aCA+IDAgJiYgY29uY2VydFRleHQgIT09ICcgJykge1xuICAgICAgJC5wb3N0KCcvc2VhcmNoY29uY2VydCcsIHtcbiAgICAgICAgICBjb25jZXJ0VGV4dDogY29uY2VydFRleHRcbiAgICAgICAgfSlcbiAgICAgICAgLmZhaWwoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICQoJy5hcGlsb2FkaW5nU2NyZWVuJykudG9nZ2xlKCdhY3RpdmUnKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAkKCcjY29uY2VydC1yZXN1bHRzJykuaHRtbChkYXRhKTtcbiAgICAgICAgfSlcbiAgICAgICAgLmRvbmUoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICQoJy5hcGlsb2FkaW5nU2NyZWVuJykudG9nZ2xlKCdhY3RpdmUnKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAkKCcjY29uY2VydC1yZXN1bHRzJykuaHRtbChkYXRhKTtcblxuICAgICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXRDb25jZXJ0c09mQXJ0aXN0KGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgJCgnLmFwaWxvYWRpbmdTY3JlZW4nKS50b2dnbGUoJ2FjdGl2ZScpO1xuICAgIGNvbnN0IGFydGlzdElkID0gJCh0aGlzKS5hdHRyKCdpZCcpO1xuICAgIGNvbnN0IGFydGlzdE5hbWUgPSAkKHRoaXMpLmZpbmQoJy5hcnRpc3ROYW1lJykudGV4dCgpO1xuXG4gICAgJC5wb3N0KCcvc2VhcmNoY29uY2VydC9maW5kQ29uY2VydHNPZkFydGlzdCcsIHtcbiAgICAgICAgYXJ0aXN0SWQ6IGFydGlzdElkLFxuICAgICAgICBhcnRpc3ROYW1lOiBhcnRpc3ROYW1lXG4gICAgICB9KVxuICAgICAgLmZhaWwoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAkKCcuYXBpbG9hZGluZ1NjcmVlbicpLnRvZ2dsZSgnYWN0aXZlJyk7XG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAkKCcjY29uY2VydC1yZXN1bHRzJykuaHRtbChkYXRhKTtcbiAgICAgIH0pXG4gICAgICAuZG9uZShmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICQoJy5hcGlsb2FkaW5nU2NyZWVuJykudG9nZ2xlKCdhY3RpdmUnKTtcbiAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICQoJyNjb25jZXJ0LXJlc3VsdHMnKS5odG1sKGRhdGEpO1xuICAgICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRDb25jZXJ0c09mTG9jYXRpb24oZSkge1xuXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICQoJy5hcGlsb2FkaW5nU2NyZWVuJykudG9nZ2xlKCdhY3RpdmUnKTtcbiAgICBjb25zdCBsb2NhdGlvbklkID0gJCh0aGlzKS5hdHRyKCdpZCcpO1xuICAgIGNvbnN0IGxvY2F0aW9uTmFtZSA9ICQodGhpcykuZmluZCgnLmFydGlzdE5hbWUnKS50ZXh0KCk7XG5cbiAgICAkLnBvc3QoJy9zZWFyY2hjb25jZXJ0L2ZpbmRDb25jZXJ0c09mTG9jYXRpb24nLCB7XG4gICAgICAgIGxvY2F0aW9uSWQ6IGxvY2F0aW9uSWQsXG4gICAgICAgIGxvY2F0aW9uTmFtZTogbG9jYXRpb25OYW1lXG4gICAgICB9KVxuICAgICAgLmZhaWwoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAkKCcuYXBpbG9hZGluZ1NjcmVlbicpLnRvZ2dsZSgnYWN0aXZlJyk7XG4gICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAkKCcjY29uY2VydC1yZXN1bHRzJykuaHRtbChkYXRhKTtcbiAgICAgIH0pXG4gICAgICAuZG9uZShmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICQoJy5hcGlsb2FkaW5nU2NyZWVuJykudG9nZ2xlKCdhY3RpdmUnKTtcbiAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICQoJyNjb25jZXJ0LXJlc3VsdHMnKS5odG1sKGRhdGEpO1xuICAgICAgfSk7XG5cbiAgfVxuXG4gIGZ1bmN0aW9uIGNhbGxTdGF0U2VhcmNoKGUpIHtcbiAgICBpZiAoZS5rZXlDb2RlID09PSAxMykge1xuICAgICAgc2VhcmNoU3RhdChlKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBzZWFyY2hTdGF0KGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAkKCdzZWN0aW9uLnN0YXQtcmVzdWx0cycpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgdmFyIHN0YXRUZXh0ID0gJC50cmltKCQoJyNzdGF0LXRleHQnKS52YWwoKSk7XG5cbiAgICBzdGF0VGV4dCA9IHN0YXRUZXh0LnJlcGxhY2UoL1xccysvZywgJyAnKTtcbiAgICBzdGF0VGV4dCA9IGVuY29kZVVSSUNvbXBvbmVudChzdGF0VGV4dCk7XG5cbiAgICBpZiAoc3RhdFRleHQubGVuZ3RoID4gMCAmJiBzdGF0VGV4dCAhPT0gJyAnKSB7XG4gICAgICAkLnBvc3QoJy9zZWFyY2hzdGF0Jywge1xuICAgICAgICAgIHN0YXRUZXh0OiBzdGF0VGV4dFxuICAgICAgICB9KVxuICAgICAgICAuZmFpbChmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgJCgnI3N0YXQtcmVzdWx0cycpLmh0bWwoZGF0YSk7XG4gICAgICAgIH0pXG4gICAgICAgIC5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAkKCcjc3RhdC1yZXN1bHRzJykuaHRtbChkYXRhKTtcbiAgICAgICAgICBpZiAoZGF0YS5pbmRleE9mKCdhbGJ1bURldGFpbHMnKSA+IC0xKSB7XG4gICAgICAgICAgICAkKCdzZWN0aW9uLnN0YXQtcmVzdWx0cycpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgICAgICAgICBjYWxsR29vZ2xlTXBhcygpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICQoJyNzdGF0LXJlc3VsdHMnKS5odG1sKCcnKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBnZXRTdGF0cyhlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgJCgnc2VjdGlvbi5zdGF0LXJlc3VsdHMnKS5hZGRDbGFzcygnaGlkZScpO1xuICAgIGNvbnN0IGFsYnVtSWQgPSAkKHRoaXMpLmF0dHIoJ2lkJyk7XG4gICAgY29uc3QgYWxidW1OYW1lID0gJCh0aGlzKS5maW5kKCcuYXJ0aXN0TmFtZScpLnRleHQoKTtcblxuICAgICQucG9zdCgnL3N0YXRyZXN1bHRzJywge1xuICAgICAgICBhbGJ1bUlkOiBhbGJ1bUlkLFxuICAgICAgICBhbGJ1bU5hbWU6IGFsYnVtTmFtZVxuICAgICAgfSlcbiAgICAgIC5mYWlsKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICQoJyNzdGF0LXJlc3VsdHMnKS5odG1sKGRhdGEpO1xuICAgICAgfSlcbiAgICAgIC5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICQoJyNzdGF0LXJlc3VsdHMnKS5odG1sKGRhdGEpO1xuICAgICAgICBpZiAoZGF0YS5pbmRleE9mKCdhbGJ1bURldGFpbHMnKSA+IC0xKSB7XG4gICAgICAgICAgJCgnc2VjdGlvbi5zdGF0LXJlc3VsdHMnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICAgIGNhbGxHb29nbGVNcGFzKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9XG5cbiAgdmFyIG1hcmtlcnMgPSBbXTtcbiAgdmFyIGltYWdlID0gJyc7XG5cbiAgZnVuY3Rpb24gY2FsbEdvb2dsZU1wYXMoKSB7XG4gICAgZGVsZXRlTWFya2VycygpO1xuICAgIGNvbnN0IGltYWdlU3JjID0gJy9kaXN0L2Fzc2V0cy8nO1xuICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG4gICAgICBjb25zb2xlLmxvZygkKCcjbGF0bG5nJykuaHRtbCgpKVxuICAgICAgdmFyIG9iaiA9IEpTT04ucGFyc2UoJCgnI2xhdGxuZycpLmh0bWwoKSk7XG4gICAgICAvLyBbe1xuICAgICAgLy8gICBcIkxBVElUVURFXCI6IDM3LjY2MjQzMTIsXG4gICAgICAvLyAgIFwiTE9OR0lUVURFXCI6IC0xMjEuODc0Njc4OVxuICAgICAgLy8gfSwge1xuICAgICAgLy8gICBcIkxBVElUVURFXCI6IDUwLjY2MjQzMTIsXG4gICAgICAvLyAgIFwiTE9OR0lUVURFXCI6IC0zMS44NzQ2Nzg5XG4gICAgICAvLyB9XTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2JqLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHZhciBjb3VudCA9IG9ialtpXS5MT0NBVElPTl9DT1VOVDtcbiAgICAgICAgaWYgKGNvdW50ID49IDIwMCkge1xuICAgICAgICAgIGltYWdlID0gaW1hZ2VTcmMgKyAnaGlnaE1hcmtlci5wbmcnO1xuICAgICAgICB9IGVsc2UgaWYgKGNvdW50ID49IDEwMCAmJiBjb3VudCA8PSAxOTkpIHtcbiAgICAgICAgICBpbWFnZSA9IGltYWdlU3JjICsgJ21hcmtlci5wbmcnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGltYWdlID0gaW1hZ2VTcmMgKyAnbG93TWFya2VyLnBuZyc7XG4gICAgICAgIH1cbiAgICAgICAgLy8gY29uc29sZS5sb2cob2JqW2ldLkxBVElUVURFLCBvYmpbaV0uTE9OR0lUVURFKVxuICAgICAgICAvLyBjb25zb2xlLmxvZyhjb3VudClcbiAgICAgICAgLy8gY29uc29sZS5sb2coaW1hZ2UpXG4gICAgICAgIHZhciBsYXRMbmcgPSBuZXcgZ29vZ2xlLm1hcHMuTGF0TG5nKG9ialtpXS5MQVRJVFVERSwgb2JqW2ldLkxPTkdJVFVERSk7XG4gICAgICAgIHZhciBtYXJrZXIgPSBuZXcgZ29vZ2xlLm1hcHMuTWFya2VyKHtcbiAgICAgICAgICBwb3NpdGlvbjogbGF0TG5nLFxuICAgICAgICAgIGljb246IGltYWdlLFxuICAgICAgICAgIG1hcDogbWFwXG4gICAgICAgIH0pO1xuICAgICAgICBtYXJrZXJzLnB1c2gobWFya2VyKTtcbiAgICAgIH1cbiAgICB9LCA1MDApO1xuICB9XG5cbiAgLy8gU2V0cyB0aGUgbWFwIG9uIGFsbCBtYXJrZXJzIGluIHRoZSBhcnJheS5cbiAgZnVuY3Rpb24gc2V0TWFwT25BbGwobWFwKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXJrZXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBtYXJrZXJzW2ldLnNldE1hcChtYXApO1xuICAgIH1cbiAgfVxuXG4gIC8vIFJlbW92ZXMgdGhlIG1hcmtlcnMgZnJvbSB0aGUgbWFwLCBidXQga2VlcHMgdGhlbSBpbiB0aGUgYXJyYXkuXG4gIGZ1bmN0aW9uIGNsZWFyTWFya2VycygpIHtcbiAgICBzZXRNYXBPbkFsbChudWxsKTtcbiAgfVxuXG4gIC8vIFNob3dzIGFueSBtYXJrZXJzIGN1cnJlbnRseSBpbiB0aGUgYXJyYXkuXG4gIGZ1bmN0aW9uIHNob3dNYXJrZXJzKCkge1xuICAgIHNldE1hcE9uQWxsKG1hcCk7XG4gIH1cblxuICAvLyBEZWxldGVzIGFsbCBtYXJrZXJzIGluIHRoZSBhcnJheSBieSByZW1vdmluZyByZWZlcmVuY2VzIHRvIHRoZW0uXG4gIGZ1bmN0aW9uIGRlbGV0ZU1hcmtlcnMoKSB7XG4gICAgY2xlYXJNYXJrZXJzKCk7XG4gICAgbWFya2VycyA9IFtdO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFuZGxlUGF5bWVudChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnNvbGUubG9nKCdoZXJlJylcbiAgICAkLnBvc3QoJy9wYXltZW50JylcbiAgICAgIC5mYWlsKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2VUZXh0ID0gZGF0YS5yZXNwb25zZUpTT047XG4gICAgICAgIHNob3dNZXNzYWdlKHJlc3BvbnNlVGV4dC5tc2csICdlcnJvcicpO1xuICAgICAgfSlcbiAgICAgIC5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgY29uc29sZS5sb2coZGF0YSlcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL3N0YXRzJztcbiAgICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gdG9nZ2xlQXJ0aXN0cyhlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICQoJy5hcnRpc3RMaXN0Jykuc2xpZGVUb2dnbGUoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHRvZ2dsZUxvY2F0aW9ucyhlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICQoJy5sb2NhdGlvbkxpc3QnKS5zbGlkZVRvZ2dsZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFV0aWxpdHkgZnVuY3Rpb25zXG4gICAqL1xuXG4gIGZ1bmN0aW9uIGNsZWFyTWVzc2FnZSgpIHtcbiAgICAkKCcjZXJyb3InKS5lbXB0eSgpO1xuICAgICQoJyN0cmFja2Vycm9yJykuZW1wdHkoKTtcbiAgICAkKCcjcGxheUxpc3RlcnJvcicpLmVtcHR5KCk7XG4gICAgJCgnI3BsYXlsaXN0VHJhY2tFcnJvcicpLmVtcHR5KCk7XG4gICAgJCgnI2VkaXRQbGF5bGlzdEVycm9yJykuZW1wdHkoKTtcbiAgICAkKCcjZW1wdHlGaWVsZCcpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgJCgnI21zZycpLmVtcHR5KCk7XG4gICAgJCgnI2VtcHR5RmllbGRzJykuYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgICAkKCcuaWNvbi1lcnJvcicpLnJlbW92ZSgpO1xuICB9XG5cbiAgZnVuY3Rpb24gc2hvd01lc3NhZ2UobXNnVHh0LCBtc2dEaXYpIHtcbiAgICB2YXIgdWxFbGUgPSAkKCcjbXNnY29udCcpO1xuICAgIGlmICh1bEVsZS5sZW5ndGggPT09IDApIHtcbiAgICAgIHVsRWxlID0gJCgnPHVsIGlkPVxcJ21zZ2NvbnRcXCc+PC91bD4nKTtcbiAgICB9XG4gICAgdWxFbGUuYXBwZW5kKCc8bGk+JyArIG1zZ1R4dCArICc8L2xpPicpO1xuICAgICQoJyMnICsgbXNnRGl2KS5odG1sKHVsRWxlKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNob3dFcnJvckNpcmNsZShjaXJjbGVJbnApIHtcbiAgICBjb25zdCBpbnBFbGUgPSAkKCcjJyArIGNpcmNsZUlucCk7XG4gICAgY29uc3Qgc3BhbkVsZSA9ICQoJzxzcGFuIGNsYXNzPVxcJ2ljb24tZXJyb3JcXCc+PGkgY2xhc3M9XFwnZmkteC1jaXJjbGVcXCc+PC9pPjwvc3Bhbj4nKTtcbiAgICBpbnBFbGUuYWZ0ZXIoc3BhbkVsZSk7XG4gIH1cblxuXG5cblxufSgpKTtcbiJdfQ==
